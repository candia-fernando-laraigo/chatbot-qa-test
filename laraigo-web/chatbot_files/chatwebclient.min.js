"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return r};var c,r={},t=Object.prototype,l=t.hasOwnProperty,d=Object.defineProperty||function(t,e,n){t[e]=n.value},e="function"==typeof Symbol?Symbol:{},a=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function i(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(c){i=function(t,e,n){return t[e]=n}}function s(t,e,n,a){var o,i,r,s,e=e&&e.prototype instanceof f?e:f,e=Object.create(e.prototype),a=new C(a||[]);return d(e,"_invoke",{value:(o=t,i=n,r=a,s=m,function(t,e){if(s===h)throw new Error("Generator is already running");if(s===g){if("throw"===t)throw e;return{value:c,done:!0}}for(r.method=t,r.arg=e;;){var n=r.delegate;if(n){n=function t(e,n){var a=n.method,o=e.iterator[a];if(o===c)return n.delegate=null,"throw"===a&&e.iterator.return&&(n.method="return",n.arg=c,t(e,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),b;a=u(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,b;o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=c),n.delegate=null,b):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}(n,r);if(n){if(n===b)continue;return n}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(s===m)throw s=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s=h;n=u(o,i,r);if("normal"===n.type){if(s=r.done?g:p,n.arg===b)continue;return{value:n.arg,done:r.done}}"throw"===n.type&&(s=g,r.method="throw",r.arg=n.arg)}})}),e}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}r.wrap=s;var m="suspendedStart",p="suspendedYield",h="executing",g="completed",b={};function f(){}function v(){}function w(){}var e={},y=(i(e,a,function(){return this}),Object.getPrototypeOf),y=y&&y(y(M([]))),x=(y&&y!==t&&l.call(y,a)&&(e=y),w.prototype=f.prototype=Object.create(e));function I(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this._invoke(e,t)})})}function E(r,s){var e;d(this,"_invoke",{value:function(n,a){function t(){return new s(function(t,e){!function e(t,n,a,o){var i,t=u(r[t],r,n);if("throw"!==t.type)return(n=(i=t.arg).value)&&"object"==_typeof(n)&&l.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,a,o)},function(t){e("throw",t,a,o)}):s.resolve(n).then(function(t){i.value=t,a(i)},function(t){return e("throw",t,a,o)});o(t.arg)}(n,a,t,e)})}return e=e?e.then(t,t):t()}})}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function M(e){if(e||""===e){var n,t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(l.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=c,t.done=!0,t}).next=t}throw new TypeError(_typeof(e)+" is not iterable")}return d(x,"constructor",{value:v.prototype=w,configurable:!0}),d(w,"constructor",{value:v,configurable:!0}),v.displayName=i(w,o,"GeneratorFunction"),r.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,i(t,o,"GeneratorFunction")),t.prototype=Object.create(x),t},r.awrap=function(t){return{__await:t}},I(E.prototype),i(E.prototype,n,function(){return this}),r.AsyncIterator=E,r.async=function(t,e,n,a,o){void 0===o&&(o=Promise);var i=new E(s(t,e,n,a),o);return r.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},I(x),i(x,o,"Generator"),i(x,a,function(){return this}),i(x,"toString",function(){return"[object Generator]"}),r.keys=function(t){var e,n=Object(t),a=[];for(e in n)a.push(e);return a.reverse(),function t(){for(;a.length;){var e=a.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},r.values=M,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(B),!t)for(var e in this)"t"===e.charAt(0)&&l.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var a=this;function t(t,e){return i.type="throw",i.arg=n,a.next=t,e&&(a.method="next",a.arg=c),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var r=l.call(o,"catchLoc"),s=l.call(o,"finallyLoc");if(r&&s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(r){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&l.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}var i=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),B(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,a,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(n=o.completion).type&&(a=n.arg,B(o)),a}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:M(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=c),b}},r}function _createForOfIteratorHelper(t,e){var n,a,o,i,r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return a=!(n=!0),{s:function(){r=r.call(t)},n:function(){var t=r.next();return n=t.done,t},e:function(t){a=!0,o=t},f:function(){try{n||null==r.return||r.return()}finally{if(a)throw o}}};if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length)return r&&(t=r),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){var n;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function asyncGeneratorStep(t,e,n,a,o,i,r){try{var s=t[i](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(a,o)}function _asyncToGenerator(s){return function(){var t=this,r=arguments;return new Promise(function(e,n){var a=s.apply(t,r);function o(t){asyncGeneratorStep(a,e,n,o,i,"next",t)}function i(t){asyncGeneratorStep(a,e,n,o,i,"throw",t)}o(void 0)})}}var baseFileUploadEndpoint="https://cloudprdbridge.laraigo.com/api/processzyxme/uploadfile",baseResourceEndpoint="https://zyxmelinux.zyxmeapp.com/zyxme/chat/",baseBrokerEndpoint="https://goo.zyxmeapp.com/api/",baseSocketEndpoint="wss://goo.zyxmeapp.com/ws/",integrationId=document.currentScript.getAttribute("integrationid"),dataShortname=document.currentScript.getAttribute("data-shortname"),dataIdnumber=document.currentScript.getAttribute("data-idunumber"),dataUsername=document.currentScript.getAttribute("data-username"),dataLastname=document.currentScript.getAttribute("data-lastname"),dataFirstname=document.currentScript.getAttribute("data-firstname"),dataEmail=document.currentScript.getAttribute("data-email"),poweredByUrl="".concat(baseResourceEndpoint,"Image/Zyxme-powered-2020.png"),companyHeaderUrl="".concat(baseResourceEndpoint,"Image/ZyxMeLogo.png"),audioAlertUrl="".concat(baseResourceEndpoint,"Audio/Alert.mp3"),chatOpenUrl="".concat(baseResourceEndpoint,"Image/Chat.png"),chatBotUrl="".concat(baseResourceEndpoint,"Image/Bot.png"),clientChatTextColor="#111111",botChatTextColor="#111111",headerTextColor="#111111",formTextColor="#111111",abandonEndpoint="",idleMessageUrl="",headerSubtitle="",headerMessage="",headerTitle="",idleMessage="",extraData="",showAttachmentMenu=!1,showMessageHeader=!1,showLocationInput=!0,showPlatformLogo=!0,showLaraigoLogo=!1,showChatRestart=!0,showAudioInput=!0,showImageInput=!0,showVideoInput=!0,showFileInput=!0,showForm=!0,hasInstagramEnabled=!1,hasMessengerEnabled=!1,hasLinkedInEnabled=!1,hasTelegramEnabled=!1,hasWhatsAppEnabled=!1,enableIdleMessage=!1,activeIdleMessage=!0,enableFormHistory=!0,incompleteHistory=!0,inputAlwaysActive=!0,playAlertSound=!0,enableAbandon=!1,sendMetaData=!1,extraJavaScript="",extraHeaderCss="",extraBodyCss="",formHtmlData="",lascontact="",carouselscroll=230,newmessages=0,timerid=0,messageQueueList=[],numberFormList=[],formDataList=[],messageList=[],sessionId=null,userId=null,webSocket=null,initializeChat=function(){var t=document.createElement("div");t.innerHTML='<link href="'.concat(baseResourceEndpoint,'ChatWebClient.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/css/intlTelInput.css" rel="stylesheet">'),document.querySelector("head").append(t),loadExternalScript("https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/intlTelInput.min.js")},changeCarouselWidth=function(){carouselscroll=window.innerWidth<=370?180:230};function createFloatingButton(){return _createFloatingButton.apply(this,arguments)}function _createFloatingButton(){return(_createFloatingButton=_asyncToGenerator(_regeneratorRuntime().mark(function t(){var e,n,a,o,i,r,s,c,l,d,u,m,p,h,g,b,f,v,w;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,getCustomStyle();case 2:if(n=t.sent,e=n.integrationData,n.buildChat){t.next=8;break}return console.error("NOT FOUND OR ALLOWED"),t.abrupt("return");case 8:carouselscroll=window.innerWidth<=370?180:230,"undefined"!==localStorage.getItem("showForm".concat(integrationId))&&localStorage.getItem("showForm".concat(integrationId))&&(showForm="true"===localStorage.getItem("showForm".concat(integrationId)).toLowerCase()),"undefined"!==localStorage.getItem("userId".concat(integrationId))&&localStorage.getItem("userId".concat(integrationId))&&(userId=localStorage.getItem("userId".concat(integrationId))),showLaraigoLogo&&(poweredByUrl="https://publico-storage-01.s3.us-east.cloud-object-storage.appdomain.cloud/UCV/ec6a761f-4863-42e7-97bb-ffea3784c9ab/001-LARAIGO-POWERED.png"),sessionId=generateId(20),(n=document.createElement("div")).innerHTML='\n\t<div\n\t\tid="floating-button-flexcontainer"\n\t\tclass="floating-button-container-chatweb"\n\t>\n\t\t<div>\n            <button\n\t\t\t    class="chat-button-chatweb hidden"\n\t\t\t    onclick="openChatWindow()"\n\t\t\t    id="chat-open-chatweb"\n\t\t    >\n        </div>\n\t\t</button>\n\t\t<button\n\t\t\tclass="floating-btn"\n\t\t\tonclick="openFloatingButtonContent()"\n\t\t\tid="floating-button-main"\n\t\t>\n\t\t</button>\n\t</div>\n\t<div class="chat-popup-chatweb hidden" id="chat-window">\n      <form class="chat-container-chatweb">\n        <div class="chat-header-chatweb">\n\t\t\t<div>\n\t\t\t\t<div id="countercontainer" style="width: 20px;height: 20px;border-radius: 50%;color: #fff;text-align: center;position:absolute;\tbackground: red; display:none; z-index: 1;">\n\t\t\t\t\t<div id="counternumber" style="color: #fff;font-size: 16px; padding-top: 2px;">0</div>\n\t\t\t\t</div>\n          \t\t<img loading="eager" class="header-image-chatweb" src="'.concat(companyHeaderUrl,'">\n\t\t  \t</div>\n\t\t  \t<div>\n\t\t\t\t<div class="header-text-title">').concat(headerTitle,'</div>\n\t\t\t\t<div class="header-text-subtitle">').concat(headerSubtitle,'</div>\n\t\t  \t</div>\n\t\t\t<div class="center-with-flex">\n\t\t\t\t<span class="header-refresh-button-chatweb header-close-button-x" onclick="refreshChatWindow()" id="chat-history-refresh">\n\t\t\t\t  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-arrow-repeat svg-vertical" viewBox="0 0 16 16">\n\t\t\t\t    <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>\n\t\t\t\t    <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>\n\t\t\t      </svg>\n\t\t\t\t</span>\n\t\t\t\t<span class="header-close-button-chatweb header-close-button-x" onclick="closeChatWindow()">&times;</span>\n\t\t\t</div>\n        </div>\n        <div class="chat-history-chatweb chat-history-chatweb-form-heigh" id="chat-history-chatweb">').concat(formHtmlData,'<div class="chat-web-alert" id="chat-history-alert-box"></div></div>\n        <span id="goBottom-chatweb" class="goBottom-chatweb-container">\n            <span class="goBottom-chatweb-son" style="font-size:20px; left:20px; top:40px">\n              <svg class="svg-vertical" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 20" width="19" height="20">\n\t\t\t    <path fill="#555" d="M3.8 6.7l5.7 5.7 5.7-5.7 1.6 1.6-7.3 7.2-7.3-7.2 1.6-1.6z"></path>\n\t\t\t  </svg>\n            </span>\n            <span class="goBottom-chatweb-span" id="new-scroll-chatweb" style="top: -4px; right:-4px"></span>\n        </span>\n        <div class="chat-input-chatweb">\n\t\t  <button type="button" class="input-send-form-button-chatweb" id="sendFormButton" onclick="sendMessage()" title="Enviar formulario">\n\t\t    Enviar Datos\n\t\t    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-play-fill svg-vertical chat-ultra-svg" viewBox="0 0 16 16">\n\t\t      <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>\n\t\t    </svg>\n          </button>\n          <div class="chat-hover-chatweb">\n            <button type="button" class="input-attach-button-chatweb" id="input-attach-button-show" onclick="showAttachmentsMenu()" title="Enviar adjunto">\n\t\t\t  <svg class="chat-main-svg" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-plus-lg svg-vertical" viewBox="0 0 16 16">\n\t\t\t    <path d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z"/>\n\t\t      </svg>\n\t\t\t</button>\n            <div class="chat-attachment-chatweb" id="attachmentmenu" onblur="showAttachmentsMenu()">\n              <div class="upload-attachment-chatweb" id="input-audio-button-show">\n                <label for="input-audio-button" class="containerattachmentbutton-chatweb">\n                  <svg class="upload-image-chatweb svg-vertical" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">\n                    <path fill="#555"\n                      d="M11.999 14.942c2.001 0 3.531-1.53 3.531-3.531V4.35c0-2.001-1.53-3.531-3.531-3.531S8.469 2.35 8.469 4.35v7.061c0 2.001 1.53 3.531 3.53 3.531zm6.238-3.53c0 3.531-2.942 6.002-6.237 6.002s-6.237-2.471-6.237-6.002H3.761c0 4.001 3.178 7.297 7.061 7.885v3.884h2.354v-3.884c3.884-.588 7.061-3.884 7.061-7.885h-2z">\n                    </path>\n                  </svg>\n                  <p class="attachment-name-chatweb">Adjuntar audio</p>\n                </label>\n                <input id="input-audio-button" type="file" accept="audio/*" onclick="showAttachmentsMenu()" onchange="fileUpload(event, \'audio\')"\n                  disabled />\n              </div>\n              <div class="upload-attachment-chatweb" id="input-file-button-show">\n                <label for="input-file-button" class="containerattachmentbutton-chatweb">\n                  <svg class="upload-image-chatweb svg-vertical" version="1.1" width="16px" height="18" viewBox="0 0 182.1 221">\n                    <g fill="#555">\n                      <path class="st0"\n                        d="M182.1,68.9c0-0.3,0-0.6-0.1-1c0,0,0-0.1,0-0.1c-0.1-0.3-0.1-0.6-0.2-0.8c0-0.1-0.1-0.2-0.1-0.3 c-0.1-0.2-0.2-0.4-0.3-0.6c0-0.1-0.1-0.2-0.1-0.2c-0.2-0.3-0.4-0.5-0.6-0.8L118.4,1.7c-0.2-0.2-0.5-0.4-0.8-0.6 c-0.1-0.1-0.2-0.1-0.2-0.2c-0.2-0.1-0.4-0.3-0.7-0.4c-0.1,0-0.2-0.1-0.2-0.1c-0.3-0.1-0.6-0.2-0.9-0.3c0,0,0,0-0.1,0 C115.2,0,114.9,0,114.6,0c0,0-0.1,0-0.1,0H29.7C13.3,0,0,13.3,0,29.7v161.6C0,207.6,13.3,221,29.7,221h122.6 c16.3,0,29.7-13.3,29.8-29.6L182.1,68.9C182.1,69,182.1,69,182.1,68.9z M120,19l43.5,44.5h-29.4c-7.8,0-14.2-6.4-14.2-14.2V19z M152.3,210H29.7c-10.3,0-18.7-8.4-18.7-18.7V29.7C11,19.4,19.4,11,29.7,11H109v38.4c0,13.9,11.3,25.2,25.2,25.2h36.9v116.8 C171,201.6,162.6,210,152.3,210z">\n                      </path>\n                    </g>\n                  </svg>\n                  <p class="attachment-name-chatweb">Adjuntar documento</p>\n                </label>\n                <input id="input-file-button" type="file" onclick="showAttachmentsMenu()" onchange="fileUpload(event, \'file\')" disabled />\n              </div>\n              <div class="upload-attachment-chatweb" id="input-image-button-show">\n                <label for="input-image-button" class="containerattachmentbutton-chatweb">\n                  <svg class="upload-image-chatweb svg-vertical" version="1.1" width="15px" height="18" viewBox="0 0 182 182">\n                    <g fill="#555">\n                      <path\n                        d="M152.3,0H29.7C13.3,0,0,13.3,0,29.7v122.7C0,168.7,13.3,182,29.7,182h122.7c16.4,0,29.7-13.3,29.7-29.7V29.7C182,13.3,168.7,0,152.3,0z M29.7,11h122.7c10.3,0,18.7,8.4,18.7,18.7v101.7c-0.4,0-0.8,0-1.2,0c-3.7,0-7.8,0-10.7,0l-12.1-23.8c-0.9-1.7-2.6-2.9-4.5-3c-1.9-0.1-3.8,0.8-4.9,2.4l-6.2,9l-16.6-26.8c-0.9-1.5-2.6-2.5-4.3-2.6c-1.8-0.1-3.5,0.6-4.6,2l-34.8,43H11V29.7C11,19.4,19.4,11,29.7,11z M152.3,171H29.7c-10.3,0-18.7-8.4-18.7-18.7v-9.8h62.5c1.7,0,3.2-0.7,4.3-2l31.6-39.1l16.9,27.4c1,1.6,2.7,2.6,4.5,2.6c1.8,0,3.6-0.9,4.7-2.4l5.8-8.4l9.5,18.6c1,1.9,2.9,3.1,5.1,3c2.1-0.1,8.9,0,13.9,0c0.4,0,0.9,0,1.3,0v10C171,162.6,162.6,171,152.3,171z">\n                      </path>\n                      <path\n                        d="M61.5,89C76.1,89,88,77.1,88,62.5S76.1,36,61.5,36S35,47.9,35,62.5S46.9,89,61.5,89z M61.5,47C70,47,77,54,77,62.5S70,78,61.5,78S46,71,46,62.5S53,47,61.5,47z">\n                      </path>\n                    </g>\n                  </svg>\n                  <p class="attachment-name-chatweb">Adjuntar imagen</p>\n                </label>\n                <input id="input-image-button" type="file" accept="image/*" onclick="showAttachmentsMenu()" onchange="fileUpload(event, \'image\')"\n                  disabled />\n              </div>\n\t\t\t  <div class="upload-attachment-chatweb" id="input-location-button-show">\n                <label for="input-location-button" class="containerattachmentbutton-chatweb">\n\t\t\t\t  <svg class="upload-image-chatweb svg-vertical" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="mdi-map-marker-radius-outline" viewBox="0 0 24 24"><path d="M12 4C14.2 4 16 5.8 16 8C16 10.1 13.9 13.5 12 15.9C10.1 13.4 8 10.1 8 8C8 5.8 9.8 4 12 4M12 2C8.7 2 6 4.7 6 8C6 12.5 12 19 12 19S18 12.4 18 8C18 4.7 15.3 2 12 2M12 6C10.9 6 10 6.9 10 8S10.9 10 12 10 14 9.1 14 8 13.1 6 12 6M20 19C20 21.2 16.4 23 12 23S4 21.2 4 19C4 17.7 5.2 16.6 7.1 15.8L7.7 16.7C6.7 17.2 6 17.8 6 18.5C6 19.9 8.7 21 12 21S18 19.9 18 18.5C18 17.8 17.3 17.2 16.2 16.7L16.8 15.8C18.8 16.6 20 17.7 20 19Z" /></svg>\n                  <p class="attachment-name-chatweb">Adjuntar localización</p>\n                </label>\n                <input id="input-location-button" onclick="showAttachmentsMenu(); locationGet();"\n                  disabled />\n              </div>\n              <div class="upload-attachment-chatweb" id="input-video-button-show">\n                <label for="input-video-button" class="containerattachmentbutton-chatweb">\n                  <svg class="upload-image-chatweb  svg-vertical" id="Layer_1" xmlns="http://www.w3.org/2000/svg"\n                    xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 53 53" width="16" height="16">\n                    <defs>\n                      <circle id="rooms-SVGID_1_" cx="26.5" cy="26.5" r="25.5"></circle>\n                    </defs>\n                    <clipPath id="rooms-SVGID_2_">\n                      <use xlink:href="#rooms-SVGID_1_" overflow="visible"></use>\n                    </clipPath>\n                    <g clip-path="url(#rooms-SVGID_2_)">\n                      <path fill="#555" d="M26.5-1.1C11.9-1.1-1.1 5.6-1.1 27.6h55.2c-.1-19-13-28.7-27.6-28.7z"></path>\n                      <path fill="#555" d="M53 26.5H-1.1c0 14.6 13 27.6 27.6 27.6s27.6-13 27.6-27.6H53z"></path>\n                      <path fill="#555" d="M17 24.5h15v9H17z"></path>\n                    </g>\n                    <g fill="#F5F5F5">\n                      <path id="svg-rooms" fill-rule="evenodd" clip-rule="evenodd"\n                        d="M28.5 18a3.5 3.5 0 0 1 3.5 3.5v10a3.5 3.5 0 0 1-3.5 3.5h-10a3.5 3.5 0 0 1-3.5-3.5v-10a3.5 3.5 0 0 1 3.5-3.5h10zm-7.925 6.782a.804.804 0 0 0-1.045-.073l-.708.698-.297.33-.134.177a4.075 4.075 0 0 0 .433 5.265 4.07 4.07 0 0 0 2.886 1.198c.976 0 1.952-.349 2.73-1.05l.784-.777.077-.091.063-.102.045-.105a.797.797 0 0 0-.189-.824.806.806 0 0 0-1.045-.073l-.704.694-.123.116-.147.119-.15.105a2.5 2.5 0 0 1-3.099-.337 2.492 2.492 0 0 1-.12-3.392l.748-.756.076-.091.063-.102.046-.105a.794.794 0 0 0-.19-.824zm5.281-.637a.803.803 0 0 0-1.044-.073l-3.67 3.662-.078.091-.063.102-.045.105a.793.793 0 0 0 .754 1.056.805.805 0 0 0 .481-.16l3.671-3.662.076-.09.064-.102.045-.105a.795.795 0 0 0-.191-.824zm2.323-2.323a4.078 4.078 0 0 0-5.615-.149l-.785.777-.073.084-.062.098a.806.806 0 0 0 .14.941.803.803 0 0 0 1.043.072l.705-.693.127-.119.137-.111a2.494 2.494 0 0 1 3.257.227c.921.923.972 2.413.117 3.392l-.746.755-.072.084-.062.098a.8.8 0 0 0 .139.941.8.8 0 0 0 1.043.072l.709-.697.148-.156.145-.17a4.084 4.084 0 0 0-.295-5.446zm9.815-.188l.006.129v9.474c0 1.31-1.714 1.998-2.744 1.12l-.878-.847a2.828 2.828 0 0 1-.871-1.849l-.007-.19v-5.943c0-.765.316-1.498.879-2.039l.877-.846c.996-.848 2.631-.234 2.738.991z">\n                      </path>\n                    </g>\n                  </svg>\n                  <p class="attachment-name-chatweb">Adjuntar video</p>\n                </label>\n                <input id="input-video-button" type="file" accept="video/*" onclick="showAttachmentsMenu()" onchange="fileUpload(event, \'video\')"\n                  disabled />\n              </div>\n            </div>\n          </div>\n          <input autocomplete="off" type="text" placeholder="Ingresa tu mensaje..." class="input-text-chatweb" id="chat-input-chatweb" disabled onclick="showAttachmentsMenu(false)" style="line-height: normal">\n          <button type="button" class="input-send-button-chatweb" id="sendButton" onclick="sendMessage()" title="Enviar mensaje">\n\t\t  \t<svg version="1.1" width="20" height="20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512.662 512.662" style="enable-background:new 0 0 512.662 512.662;" xml:space="preserve">\n\t\t  \t  <g><g>\n\t\t  \t    <path d="M505.021,5.868c-0.064-0.043-0.085-0.107-0.128-0.149c-0.128-0.107-0.256-0.128-0.384-0.235\n\t\t  \t     c-1.131-0.981-2.475-1.621-3.797-2.325c-0.427-0.213-0.747-0.576-1.195-0.768c-0.064-0.021-0.107-0.021-0.149-0.043\n\t\t  \t     c-0.469-0.192-0.853-0.533-1.323-0.704c-1.771-0.661-3.648-0.875-5.547-1.045c-0.576-0.043-1.131-0.299-1.707-0.299\n\t\t  \t     c-2.475-0.021-4.971,0.384-7.403,1.259L14.055,172.225c-7.445,2.709-12.779,9.323-13.867,17.173\n\t\t  \t     c-1.045,7.851,2.304,15.637,8.768,20.245l141.888,101.355l20.032,140.309c1.237,8.533,7.488,15.488,15.851,17.643\n\t\t  \t     c1.749,0.448,3.541,0.661,5.291,0.661c6.592,0,12.971-3.072,17.045-8.533l50.347-67.093l132.032,113.237\n\t\t  \t     c3.947,3.371,8.875,5.141,13.909,5.141c2.389,0,4.779-0.405,7.125-1.216c7.168-2.56,12.48-8.768,13.845-16.277l85.995-468.928\n\t\t  \t     C513.725,18.262,510.738,10.71,505.021,5.868z M240.125,348.396l-1.536,2.219l-32.747,43.669l-12.395-86.827l185.109-160.448\n\t\t  \t     L240.125,348.396z"/>\n\t\t  \t  </g></g>\n\t\t    </svg>\n          </button>\n\t\t  <div id="chat-footer-chatweb" class="footer-chatweb">\n\t\t    <img class="powered-by-logo" src="').concat(poweredByUrl,'">\n\t\t  </div>\n        </div>\n      </form>\n    </div>\n\t'),document.querySelector("body").append(n),document.getElementById("chat-open-chatweb").style.backgroundImage="url(".concat(chatOpenUrl,")"),a=e.metadata.instagram,o=e.metadata.linkedin,i=e.metadata.messenger,r=e.metadata.telegram,s=e.metadata.whatsapp,e&&!0===(null==o?void 0:o.enabled)&&(u=document.getElementById("floating-button-flexcontainer"),d=document.createElement("div"),(l=document.createElement("button")).setAttribute("class","floating-generic-btn hidden"),l.setAttribute("id","floating-linkedin-btn"),l.style.backgroundImage="url(".concat(o.buttonbackground,")"),l.addEventListener("click",function(){window.open("".concat(o.buttonhref),"_blank")}),o.tooltiptext&&(l.addEventListener("mouseover",function(){toggleHidden("floating-linkedin-tooltip")}),l.addEventListener("mouseout",function(){toggleHidden("floating-linkedin-tooltip")}),(c=document.createElement("div")).setAttribute("class","floating-option-tooltip hidden"),c.setAttribute("id","floating-linkedin-tooltip"),c.innerHTML="<span>"+o.tooltiptext+"</span>",l.appendChild(c)),d.appendChild(l),u.insertBefore(d,u.firstChild)),e&&!0===(null==a?void 0:a.enabled)&&(c=document.getElementById("floating-button-flexcontainer"),l=document.createElement("div"),(d=document.createElement("button")).setAttribute("class","floating-generic-btn hidden"),d.setAttribute("id","floating-instagram-btn"),d.style.backgroundImage="url(".concat(a.buttonbackground,")"),d.addEventListener("click",function(){window.open("".concat(a.buttonhref),"_blank")}),a.tooltiptext&&(d.addEventListener("mouseover",function(){toggleHidden("floating-instagram-tooltip")}),d.addEventListener("mouseout",function(){toggleHidden("floating-instagram-tooltip")}),(u=document.createElement("div")).setAttribute("class","floating-option-tooltip hidden"),u.setAttribute("id","floating-instagram-tooltip"),u.innerHTML="<span>"+a.tooltiptext+"</span>",d.appendChild(u)),l.appendChild(d),c.insertBefore(l,c.firstChild)),e&&!0===(null==i?void 0:i.enabled)&&(g=document.getElementById("floating-button-flexcontainer"),h=document.createElement("div"),(p=document.createElement("button")).setAttribute("class","floating-generic-btn hidden"),p.setAttribute("id","floating-messenger-btn"),p.style.backgroundImage="url(".concat(i.buttonbackground,")"),p.addEventListener("click",function(){window.open("".concat(i.buttonhref),"_blank")}),i.tooltiptext&&(p.addEventListener("mouseover",function(){toggleHidden("floating-messenger-tooltip")}),p.addEventListener("mouseout",function(){toggleHidden("floating-messenger-tooltip")}),(m=document.createElement("div")).setAttribute("class","floating-option-tooltip hidden"),m.setAttribute("id","floating-messenger-tooltip"),m.innerHTML="<span>"+i.tooltiptext+"</span>",p.appendChild(m)),h.appendChild(p),g.insertBefore(h,g.firstChild)),e&&!0===(null==r?void 0:r.enabled)&&(m=document.getElementById("floating-button-flexcontainer"),p=document.createElement("div"),(h=document.createElement("button")).setAttribute("class","floating-generic-btn hidden"),h.setAttribute("id","floating-telegram-btn"),h.style.backgroundImage="url(".concat(r.buttonbackground,")"),h.addEventListener("click",function(){window.open("".concat(r.buttonhref),"_blank")}),r.tooltiptext&&(h.addEventListener("mouseover",function(){toggleHidden("floating-telegram-tooltip")}),h.addEventListener("mouseout",function(){toggleHidden("floating-telegram-tooltip")}),(g=document.createElement("div")).setAttribute("class","floating-option-tooltip hidden"),g.setAttribute("id","floating-telegram-tooltip"),g.innerHTML="<span>"+r.tooltiptext+"</span>",h.appendChild(g)),p.appendChild(h),m.insertBefore(p,m.firstChild)),e&&!0===(null==s?void 0:s.enabled)&&(w=document.getElementById("floating-button-flexcontainer"),v=document.createElement("div"),(f=document.createElement("button")).setAttribute("class","floating-whatapp-btn hidden"),f.setAttribute("id","floating-whatapp-btn"),f.style.backgroundImage="url(".concat(s.whatsappbuttonbackground,")"),f.addEventListener("click",function(){window.open("".concat(s.whatsappbuttonhref),"_blank")}),s.tooltiptext&&(f.addEventListener("mouseover",function(){toggleHidden("floating-whatsapp-tooltip")}),f.addEventListener("mouseout",function(){toggleHidden("floating-whatsapp-tooltip")}),(b=document.createElement("div")).setAttribute("class","floating-option-tooltip hidden"),b.setAttribute("id","floating-whatsapp-tooltip"),b.innerHTML="<span>"+s.tooltiptext+"</span>",f.appendChild(b)),v.appendChild(f),w.insertBefore(v,w.firstChild),s.mainbuttonbackground&&(document.getElementById("floating-button-main").style.backgroundImage="url(".concat(s.mainbuttonbackground,")")),s.maintooltiptext)&&((b=document.getElementById("chat-open-chatweb")).addEventListener("mouseover",function(){toggleHidden("floating-chatweb-tooltip")}),b.addEventListener("mouseout",function(){toggleHidden("floating-chatweb-tooltip")}),(f=document.createElement("div")).setAttribute("class","floating-option-tooltip hidden"),f.setAttribute("id","floating-chatweb-tooltip"),f.innerHTML="<span>"+s.maintooltiptext+"</span>",b.appendChild(f)),handleNumericInput(),handleExtraOptions(),handleExtraCode(),v=function(t){""!==t.target.value.trim()?document.getElementById("sendButton").style.display="block":document.getElementById("sendButton").style.display="none",0!==newmessages&&sendEvent("read"),newmessages=0,document.getElementById("countercontainer").style.display="none"},(w=document.getElementById("chat-input-chatweb")).addEventListener("input",v),w.addEventListener("focus",function(){0!==newmessages&&sendEvent("read"),newmessages=0,document.getElementById("countercontainer").style.display="none"}),w.addEventListener("keyup",function(t){"Enter"===t.key&&(t.preventDefault(),document.getElementById("chat-input-chatweb").value=document.getElementById("chat-input-chatweb").value.substring(0,document.getElementById("chat-input-chatweb").value.length),document.getElementById("sendButton").click())}),changeChatHistoryClass(showForm),enableAbandon&&(document.querySelector(".header-close-button-chatweb").addEventListener("click",sendAbandonEvent),setAbandonEvent()),enableIdleMessage&&(setIdleMessage(),showIdleMessageDelay()),(showForm?showFormButton:hideFormButton)();case 39:case"end":return t.stop()}},t)}))).apply(this,arguments)}function redirectToWSPPage(){window.open(whatsappUrl,"_blank")}function toggleHidden(t){t=document.getElementById(t);t&&t.classList.toggle("hidden")}function openFloatingButtonContent(){toggleHidden("chat-open-chatweb"),toggleHidden("floating-instagram-btn"),toggleHidden("floating-linkedin-btn"),toggleHidden("floating-messenger-btn"),toggleHidden("floating-telegram-btn"),toggleHidden("floating-whatapp-btn"),enableIdleMessage&&(activeIdleMessage=!1,hideIdleMessage())}function printChat(){return _printChat.apply(this,arguments)}function _printChat(){return(_printChat=_asyncToGenerator(_regeneratorRuntime().mark(function t(){var e,n,a;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,getCustomStyle();case 2:if(e=t.sent,e.buildChat){t.next=7;break}return console.error("NOT FOUND OR ALLOWED"),t.abrupt("return");case 7:carouselscroll=window.innerWidth<=370?180:230,"undefined"!==localStorage.getItem("showForm".concat(integrationId))&&localStorage.getItem("showForm".concat(integrationId))&&(showForm="true"===localStorage.getItem("showForm".concat(integrationId)).toLowerCase()),"undefined"!==localStorage.getItem("userId".concat(integrationId))&&localStorage.getItem("userId".concat(integrationId))&&(userId=localStorage.getItem("userId".concat(integrationId))),showLaraigoLogo&&(poweredByUrl="".concat(baseResourceEndpoint,"Image/Laraigo-powered-2024.png")),sessionId=generateId(20),(e=document.createElement("div")).innerHTML='\n\t<div id="chat-image-modal" class="chat-image-modal">\n  \t  <span class="chat-image-modal-close" onclick="closeImageModal()">&times;</span>\n  \t  <img loading="eager" class="chat-image-modal-content" id="modal-image">\n\t</div>\n\t<button\n\t\tclass="chat-button-chatweb"\n\t\tonclick="openChatWindow()"\n\t\tid="chat-open-chatweb"\n\t>\n\t</button>\n\t<div class="chat-popup-chatweb hidden" id="chat-window">\n      <form class="chat-container-chatweb">\n        <div class="chat-header-chatweb">\n\t\t\t<div>\n\t\t\t\t<div id="countercontainer" style="width: 20px;height: 20px;border-radius: 50%;color: #fff;text-align: center;position:absolute;\tbackground: red; display:none; z-index: 1;">\n\t\t\t\t\t<div id="counternumber" style="color: #fff;font-size: 16px; padding-top: 2px;">0</div>\n\t\t\t\t</div>\n          \t\t<img loading="eager" class="header-image-chatweb" src="'.concat(companyHeaderUrl,'">\n\t\t  \t</div>\n\t\t  \t<div>\n\t\t\t\t<div class="header-text-title">').concat(headerTitle,'</div>\n\t\t\t\t<div class="header-text-subtitle">').concat(headerSubtitle,'</div>\n\t\t  \t</div>\n\t\t\t<div class="center-with-flex">\n\t\t\t\t<span class="header-refresh-button-chatweb header-close-button-x" onclick="refreshChatWindow()" id="chat-history-refresh">\n\t\t\t\t  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-arrow-repeat svg-vertical" viewBox="0 0 16 16">\n\t\t\t\t    <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>\n\t\t\t\t    <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>\n\t\t\t      </svg>\n\t\t\t\t</span>\n\t\t\t\t<span class="header-close-button-chatweb header-close-button-x" onclick="closeChatWindow()">&times;</span>\n\t\t\t</div>\n        </div>\n\t\t<div class="chat-history-chatweb chat-history-chatweb-form-heigh" id="chat-history-chatweb">\n\t\t\t').concat(formHtmlData,'\n\t\t\t<div class="chat-web-alert" id="chat-history-alert-box"></div>\n\t\t</div>\n\t\t<span id="goBottom-chatweb" class="goBottom-chatweb-container">\n            <span class="goBottom-chatweb-son" style="font-size:20px; left:20px; top:40px">\n              <svg class="svg-vertical" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 20" width="19" height="20">\n\t\t\t    <path fill="#555" d="M3.8 6.7l5.7 5.7 5.7-5.7 1.6 1.6-7.3 7.2-7.3-7.2 1.6-1.6z"></path>\n\t\t\t  </svg>\n            </span>\n            <span class="goBottom-chatweb-span" id="new-scroll-chatweb" style="top: -4px; right:-4px"></span>\n        </span>\n        <div class="chat-input-chatweb">\n\t\t  <button type="button" class="input-send-form-button-chatweb" id="sendFormButton" onclick="sendMessage()" title="Enviar formulario">\n\t\t    Enviar Datos \n\t\t    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-play-fill svg-vertical chat-ultra-svg" viewBox="0 0 16 16">\n\t\t      <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>\n\t\t    </svg>\n          </button>\n          <div class="chat-hover-chatweb">\n            <button type="button" class="input-attach-button-chatweb" id="input-attach-button-show" onclick="showAttachmentsMenu()" title="Enviar adjunto">\n\t\t\t  <svg class="chat-main-svg" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-plus-lg svg-vertical" viewBox="0 0 16 16">\n\t\t\t    <path d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z"/>\n\t\t      </svg>\n\t\t\t</button>\n            <div class="chat-attachment-chatweb" id="attachmentmenu" onblur="showAttachmentsMenu()">\n              <div class="upload-attachment-chatweb" id="input-audio-button-show">\n                <label for="input-audio-button" class="containerattachmentbutton-chatweb">\n                  <svg class="upload-image-chatweb svg-vertical" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">\n                    <path fill="#555"\n                      d="M11.999 14.942c2.001 0 3.531-1.53 3.531-3.531V4.35c0-2.001-1.53-3.531-3.531-3.531S8.469 2.35 8.469 4.35v7.061c0 2.001 1.53 3.531 3.53 3.531zm6.238-3.53c0 3.531-2.942 6.002-6.237 6.002s-6.237-2.471-6.237-6.002H3.761c0 4.001 3.178 7.297 7.061 7.885v3.884h2.354v-3.884c3.884-.588 7.061-3.884 7.061-7.885h-2z">\n                    </path>\n                  </svg>\n                  <p class="attachment-name-chatweb">Adjuntar audio</p>\n                </label>\n                <input id="input-audio-button" type="file" accept="audio/*" onclick="showAttachmentsMenu()" onchange="fileUpload(event, \'audio\')"\n                  disabled />\n              </div>\n              <div class="upload-attachment-chatweb" id="input-file-button-show">\n                <label for="input-file-button" class="containerattachmentbutton-chatweb">\n                  <svg class="upload-image-chatweb svg-vertical" version="1.1" width="16px" height="18" viewBox="0 0 182.1 221">\n                    <g fill="#555">\n                      <path class="st0"\n                        d="M182.1,68.9c0-0.3,0-0.6-0.1-1c0,0,0-0.1,0-0.1c-0.1-0.3-0.1-0.6-0.2-0.8c0-0.1-0.1-0.2-0.1-0.3 c-0.1-0.2-0.2-0.4-0.3-0.6c0-0.1-0.1-0.2-0.1-0.2c-0.2-0.3-0.4-0.5-0.6-0.8L118.4,1.7c-0.2-0.2-0.5-0.4-0.8-0.6 c-0.1-0.1-0.2-0.1-0.2-0.2c-0.2-0.1-0.4-0.3-0.7-0.4c-0.1,0-0.2-0.1-0.2-0.1c-0.3-0.1-0.6-0.2-0.9-0.3c0,0,0,0-0.1,0 C115.2,0,114.9,0,114.6,0c0,0-0.1,0-0.1,0H29.7C13.3,0,0,13.3,0,29.7v161.6C0,207.6,13.3,221,29.7,221h122.6 c16.3,0,29.7-13.3,29.8-29.6L182.1,68.9C182.1,69,182.1,69,182.1,68.9z M120,19l43.5,44.5h-29.4c-7.8,0-14.2-6.4-14.2-14.2V19z M152.3,210H29.7c-10.3,0-18.7-8.4-18.7-18.7V29.7C11,19.4,19.4,11,29.7,11H109v38.4c0,13.9,11.3,25.2,25.2,25.2h36.9v116.8 C171,201.6,162.6,210,152.3,210z">\n                      </path>\n                    </g>\n                  </svg>\n                  <p class="attachment-name-chatweb">Adjuntar documento</p>\n                </label>\n                <input id="input-file-button" type="file" onclick="showAttachmentsMenu()" onchange="fileUpload(event, \'file\')" disabled />\n              </div>\n              <div class="upload-attachment-chatweb" id="input-image-button-show">\n                <label for="input-image-button" class="containerattachmentbutton-chatweb">\n                  <svg class="upload-image-chatweb svg-vertical" version="1.1" width="15px" height="18" viewBox="0 0 182 182">\n                    <g fill="#555">\n                      <path\n                        d="M152.3,0H29.7C13.3,0,0,13.3,0,29.7v122.7C0,168.7,13.3,182,29.7,182h122.7c16.4,0,29.7-13.3,29.7-29.7V29.7C182,13.3,168.7,0,152.3,0z M29.7,11h122.7c10.3,0,18.7,8.4,18.7,18.7v101.7c-0.4,0-0.8,0-1.2,0c-3.7,0-7.8,0-10.7,0l-12.1-23.8c-0.9-1.7-2.6-2.9-4.5-3c-1.9-0.1-3.8,0.8-4.9,2.4l-6.2,9l-16.6-26.8c-0.9-1.5-2.6-2.5-4.3-2.6c-1.8-0.1-3.5,0.6-4.6,2l-34.8,43H11V29.7C11,19.4,19.4,11,29.7,11z M152.3,171H29.7c-10.3,0-18.7-8.4-18.7-18.7v-9.8h62.5c1.7,0,3.2-0.7,4.3-2l31.6-39.1l16.9,27.4c1,1.6,2.7,2.6,4.5,2.6c1.8,0,3.6-0.9,4.7-2.4l5.8-8.4l9.5,18.6c1,1.9,2.9,3.1,5.1,3c2.1-0.1,8.9,0,13.9,0c0.4,0,0.9,0,1.3,0v10C171,162.6,162.6,171,152.3,171z">\n                      </path>\n                      <path\n                        d="M61.5,89C76.1,89,88,77.1,88,62.5S76.1,36,61.5,36S35,47.9,35,62.5S46.9,89,61.5,89z M61.5,47C70,47,77,54,77,62.5S70,78,61.5,78S46,71,46,62.5S53,47,61.5,47z">\n                      </path>\n                    </g>\n                  </svg>\n                  <p class="attachment-name-chatweb">Adjuntar imagen</p>\n                </label>\n                <input id="input-image-button" type="file" accept="image/*" onclick="showAttachmentsMenu()" onchange="fileUpload(event, \'image\')"\n                  disabled />\n              </div>\n\t\t\t  <div class="upload-attachment-chatweb" id="input-location-button-show">\n                <label for="input-location-button" class="containerattachmentbutton-chatweb">\n\t\t\t\t  <svg class="upload-image-chatweb svg-vertical" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="mdi-map-marker-radius-outline" viewBox="0 0 24 24"><path d="M12 4C14.2 4 16 5.8 16 8C16 10.1 13.9 13.5 12 15.9C10.1 13.4 8 10.1 8 8C8 5.8 9.8 4 12 4M12 2C8.7 2 6 4.7 6 8C6 12.5 12 19 12 19S18 12.4 18 8C18 4.7 15.3 2 12 2M12 6C10.9 6 10 6.9 10 8S10.9 10 12 10 14 9.1 14 8 13.1 6 12 6M20 19C20 21.2 16.4 23 12 23S4 21.2 4 19C4 17.7 5.2 16.6 7.1 15.8L7.7 16.7C6.7 17.2 6 17.8 6 18.5C6 19.9 8.7 21 12 21S18 19.9 18 18.5C18 17.8 17.3 17.2 16.2 16.7L16.8 15.8C18.8 16.6 20 17.7 20 19Z" /></svg>\n                  <p class="attachment-name-chatweb">Adjuntar localización</p>\n                </label>\n                <input id="input-location-button" onclick="showAttachmentsMenu(); locationGet();"\n                  disabled />\n              </div>\n              <div class="upload-attachment-chatweb" id="input-video-button-show">\n                <label for="input-video-button" class="containerattachmentbutton-chatweb">\n                  <svg class="upload-image-chatweb  svg-vertical" id="Layer_1" xmlns="http://www.w3.org/2000/svg"\n                    xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 53 53" width="16" height="16">\n                    <defs>\n                      <circle id="rooms-SVGID_1_" cx="26.5" cy="26.5" r="25.5"></circle>\n                    </defs>\n                    <clipPath id="rooms-SVGID_2_">\n                      <use xlink:href="#rooms-SVGID_1_" overflow="visible"></use>\n                    </clipPath>\n                    <g clip-path="url(#rooms-SVGID_2_)">\n                      <path fill="#555" d="M26.5-1.1C11.9-1.1-1.1 5.6-1.1 27.6h55.2c-.1-19-13-28.7-27.6-28.7z"></path>\n                      <path fill="#555" d="M53 26.5H-1.1c0 14.6 13 27.6 27.6 27.6s27.6-13 27.6-27.6H53z"></path>\n                      <path fill="#555" d="M17 24.5h15v9H17z"></path>\n                    </g>\n                    <g fill="#F5F5F5">\n                      <path id="svg-rooms" fill-rule="evenodd" clip-rule="evenodd"\n                        d="M28.5 18a3.5 3.5 0 0 1 3.5 3.5v10a3.5 3.5 0 0 1-3.5 3.5h-10a3.5 3.5 0 0 1-3.5-3.5v-10a3.5 3.5 0 0 1 3.5-3.5h10zm-7.925 6.782a.804.804 0 0 0-1.045-.073l-.708.698-.297.33-.134.177a4.075 4.075 0 0 0 .433 5.265 4.07 4.07 0 0 0 2.886 1.198c.976 0 1.952-.349 2.73-1.05l.784-.777.077-.091.063-.102.045-.105a.797.797 0 0 0-.189-.824.806.806 0 0 0-1.045-.073l-.704.694-.123.116-.147.119-.15.105a2.5 2.5 0 0 1-3.099-.337 2.492 2.492 0 0 1-.12-3.392l.748-.756.076-.091.063-.102.046-.105a.794.794 0 0 0-.19-.824zm5.281-.637a.803.803 0 0 0-1.044-.073l-3.67 3.662-.078.091-.063.102-.045.105a.793.793 0 0 0 .754 1.056.805.805 0 0 0 .481-.16l3.671-3.662.076-.09.064-.102.045-.105a.795.795 0 0 0-.191-.824zm2.323-2.323a4.078 4.078 0 0 0-5.615-.149l-.785.777-.073.084-.062.098a.806.806 0 0 0 .14.941.803.803 0 0 0 1.043.072l.705-.693.127-.119.137-.111a2.494 2.494 0 0 1 3.257.227c.921.923.972 2.413.117 3.392l-.746.755-.072.084-.062.098a.8.8 0 0 0 .139.941.8.8 0 0 0 1.043.072l.709-.697.148-.156.145-.17a4.084 4.084 0 0 0-.295-5.446zm9.815-.188l.006.129v9.474c0 1.31-1.714 1.998-2.744 1.12l-.878-.847a2.828 2.828 0 0 1-.871-1.849l-.007-.19v-5.943c0-.765.316-1.498.879-2.039l.877-.846c.996-.848 2.631-.234 2.738.991z">\n                      </path>\n                    </g>\n                  </svg>\n                  <p class="attachment-name-chatweb">Adjuntar video</p>\n                </label>\n                <input id="input-video-button" type="file" accept="video/*" onclick="showAttachmentsMenu()" onchange="fileUpload(event, \'video\')"\n                  disabled />\n              </div>\n            </div>\n          </div>\n          <input autocomplete="off" type="text" placeholder="Ingresa tu mensaje..." class="input-text-chatweb" id="chat-input-chatweb" disabled onclick="showAttachmentsMenu(false)" style="line-height: normal">\n          <button type="button" class="input-send-button-chatweb" id="sendButton" onclick="sendMessage()" title="Enviar mensaje">\n\t\t  \t<svg version="1.1" width="20" height="20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512.662 512.662" style="enable-background:new 0 0 512.662 512.662;" xml:space="preserve">\n\t\t  \t  <g><g>\n\t\t  \t    <path d="M505.021,5.868c-0.064-0.043-0.085-0.107-0.128-0.149c-0.128-0.107-0.256-0.128-0.384-0.235\n\t\t  \t     c-1.131-0.981-2.475-1.621-3.797-2.325c-0.427-0.213-0.747-0.576-1.195-0.768c-0.064-0.021-0.107-0.021-0.149-0.043\n\t\t  \t     c-0.469-0.192-0.853-0.533-1.323-0.704c-1.771-0.661-3.648-0.875-5.547-1.045c-0.576-0.043-1.131-0.299-1.707-0.299\n\t\t  \t     c-2.475-0.021-4.971,0.384-7.403,1.259L14.055,172.225c-7.445,2.709-12.779,9.323-13.867,17.173\n\t\t  \t     c-1.045,7.851,2.304,15.637,8.768,20.245l141.888,101.355l20.032,140.309c1.237,8.533,7.488,15.488,15.851,17.643\n\t\t  \t     c1.749,0.448,3.541,0.661,5.291,0.661c6.592,0,12.971-3.072,17.045-8.533l50.347-67.093l132.032,113.237\n\t\t  \t     c3.947,3.371,8.875,5.141,13.909,5.141c2.389,0,4.779-0.405,7.125-1.216c7.168-2.56,12.48-8.768,13.845-16.277l85.995-468.928\n\t\t  \t     C513.725,18.262,510.738,10.71,505.021,5.868z M240.125,348.396l-1.536,2.219l-32.747,43.669l-12.395-86.827l185.109-160.448\n\t\t  \t     L240.125,348.396z"/>\n\t\t  \t  </g></g>\n\t\t    </svg>\n          </button>\n\t\t  <div id="chat-footer-chatweb" class="footer-chatweb">\n\t\t    <img class="powered-by-logo" width="138" height="16" src="').concat(poweredByUrl,'">\n\t\t  </div>\n        </div>\n      </form>\n    </div>'),document.querySelector("body").append(e),document.getElementById("chat-open-chatweb").style.cssText="background-image: url(".concat(chatOpenUrl,"); position: fixed !important; right: 20px !important; bottom: 20px !important;"),handleNumericInput(),handleExtraOptions(),handleExtraCode(),n=function(t){""!==t.target.value.trim()?document.getElementById("sendButton").style.display="block":document.getElementById("sendButton").style.display="none",0!==newmessages&&sendEvent("read"),newmessages=0,document.getElementById("countercontainer").style.display="none"},(a=document.getElementById("chat-input-chatweb")).addEventListener("input",n),a.addEventListener("focus",function(){0!==newmessages&&sendEvent("read"),newmessages=0,document.getElementById("countercontainer").style.display="none"}),a.addEventListener("keyup",function(t){"Enter"===t.key&&(t.preventDefault(),document.getElementById("chat-input-chatweb").value=document.getElementById("chat-input-chatweb").value.substring(0,document.getElementById("chat-input-chatweb").value.length),document.getElementById("sendButton").click())}),changeChatHistoryClass(showForm),enableAbandon&&(document.querySelector(".header-close-button-chatweb").addEventListener("click",sendAbandonEvent),setAbandonEvent()),enableIdleMessage&&(setIdleMessage(),showIdleMessageDelay()),(showForm?showFormButton:hideFormButton)();case 28:case"end":return t.stop()}},t)}))).apply(this,arguments)}function showIdleMessageDelay(){setTimeout(function(){activeIdleMessage&&showIdleMessage()},3e3)}function setIdleMessage(){var t=document.createElement("div"),e="";""===idleMessage&&(idleMessage="¡Hola! ¿En que te puedo ayudar?"),""!==idleMessageUrl&&(e='<img class="speech-bubble-icon" src="'.concat(idleMessageUrl,'">')),t.innerHTML='\n\t<div class="speech-bubble-div" id="chat-idle-message">\n\t'.concat(e,'\n\t<a class="speech-bubble-times" onclick="hideIdleMessage()">×</a>\n\t<span>').concat(idleMessage,"</span>\n\t</div>"),document.querySelector("body").append(t),hideIdleMessage()}function hideIdleMessage(){document.getElementById("chat-idle-message").style.display="none"}function showIdleMessage(){document.getElementById("chat-idle-message").style.display="block"}function handleNumericInput(){0<numberFormList.length&&numberFormList.forEach(function(t){intlTelInput(document.querySelector("#".concat(t)),{autoPlaceholder:"aggressive",initialCountry:"PE",separateDialCode:!0,utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js"})})}function handleExtraOptions(){var t;showAudioInput||(document.getElementById("input-audio-button-show").style.display="none"),showFileInput||(document.getElementById("input-file-button-show").style.display="none"),showImageInput||(document.getElementById("input-image-button-show").style.display="none"),showLocationInput||(document.getElementById("input-location-button-show").style.display="none"),showVideoInput||(document.getElementById("input-video-button-show").style.display="none"),showAudioInput||showFileInput||showImageInput||showLocationInput||showVideoInput||(document.getElementById("input-attach-button-show").style.display="none"),showPlatformLogo||showLaraigoLogo||(document.getElementById("chat-footer-chatweb").style.display="none",(t=document.createElement("style")).innerHTML=t.innerHTML+".input-attach-button-chatweb { background-color: rgb(138, 138, 143); border: none; border-radius: 50%; color: #FFFFFF; cursor: pointer; font-size: medium; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal; font-variant: normal; font-stretch: normal; font-kerning: normal; line-height: normal; margin: 5px 6px 8px 6px; outline: none; padding: 5px 6px 2px 6px; transition: all 0.4s; transition-duration: 0.4s; transition-timing-function: ease-out; max-height: 40px; }",t.innerHTML=t.innerHTML+".input-attach-button-chatweb:hover { background-color: rgb(138, 138, 143); border: none; border-radius: 50%; color: #FFFFFF; cursor: pointer; font-size: medium; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal; font-variant: normal; font-stretch: normal; font-kerning: normal; line-height: normal; margin: 5px 6px 8px 6px; outline: none; padding: 5px 6px 2px 6px; transition: all 0.4s; transition-duration: 0.4s; transition-timing-function: ease-out; max-height: 40px; }",t.innerHTML=t.innerHTML+".input-attach-button-chatweb:focus { background-color: rgb(138, 138, 143); border: none; border-radius: 50%; color: #FFFFFF; cursor: pointer; font-size: medium; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal; font-variant: normal; font-stretch: normal; font-kerning: normal; line-height: normal; margin: 5px 6px 8px 6px; outline: none; padding: 5px 6px 2px 6px; transition: all 0.4s; transition-duration: 0.4s; transition-timing-function: ease-out; max-height: 40px; }",t.innerHTML=t.innerHTML+".input-text-chatweb { color: #000!important; background-color: #FFFFFF !important; border: none !important; border-radius: 20px 20px 20px 20px !important; float: left; display: block; font-family: Arial, Helvetica, sans-serif; font-size: small; font-weight: normal; font-style: normal; font-variant: normal; font-stretch: normal; font-kerning: normal; line-height: 40px !important; height: 40px; resize: none; outline: none !important; overflow: hidden; padding: 10px 12px 10px 16px !important; margin: 0px auto 0px 2px !important; }",t.innerHTML=t.innerHTML+".input-text-chatweb:hover { background-color: #FFFFFF !important; border: none !important; border-radius: 20px 20px 20px 20px !important; float: left; display: block; font-family: Arial, Helvetica, sans-serif; font-size: small; font-weight: normal; font-style: normal; font-variant: normal; font-stretch: normal; font-kerning: normal; line-height: 40px !important; height: 40px; resize: none; outline: none !important; overflow: hidden; padding: 10px 12px 10px 16px !important; margin: 0px auto 0px 2px !important; }",t.innerHTML=t.innerHTML+".input-text-chatweb:focus { background-color: #FFFFFF !important; border: none !important; border-radius: 20px 20px 20px 20px !important; float: left; display: block; font-family: Arial, Helvetica, sans-serif; font-size: small; font-weight: normal; font-style: normal; font-variant: normal; font-stretch: normal; font-kerning: normal; line-height: 40px !important; height: 40px; resize: none; outline: none !important; overflow: hidden; padding: 10px 12px 10px 16px !important; margin: 0px auto 0px 2px !important; }",t.innerHTML=t.innerHTML+".input-send-button-chatweb { background-color: rgb(141, 195, 223); border: none; border-radius: 50%; color: #FFFFFF; cursor: pointer; display: none; font-size: medium; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal; font-variant: normal; font-stretch: normal; font-kerning: normal; line-height: normal; outline: none; margin: 0px 0px 0px 0px; padding: 4px 2px 0px 0px; height: 40px; width: 40px; transition: all 0.4s; transition-duration: 0.4s; transition-timing-function: ease-out; }",t.innerHTML=t.innerHTML+".input-send-button-chatweb:hover { background-color: rgb(141, 195, 223); border: none; border-radius: 50%; color: #FFFFFF; cursor: pointer; display: none; font-size: medium; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal; font-variant: normal; font-stretch: normal; font-kerning: normal; line-height: normal; outline: none; margin: 0px 0px 0px 0px; padding: 4px 2px 0px 0px; height: 40px; width: 40px; transition: all 0.4s; transition-duration: 0.4s; transition-timing-function: ease-out; }",t.innerHTML=t.innerHTML+".input-send-button-chatweb:focus { background-color: rgb(141, 195, 223); border: none; border-radius: 50%; color: #FFFFFF; cursor: pointer; display: none; font-size: medium; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal; font-variant: normal; font-stretch: normal; font-kerning: normal; line-height: normal; outline: none; margin: 0px 0px 0px 0px; padding: 4px 2px 0px 0px; height: 40px; width: 40px; transition: all 0.4s; transition-duration: 0.4s; transition-timing-function: ease-out; }",t.innerHTML=t.innerHTML+".input-send-form-button-chatweb { background-color: rgb(141, 195, 223) !important; border: none !important; border-radius: 20px !important; color: #FFFFFF !important; cursor: pointer !important; display: none; font-size: 14px !important; font-family: Arial, Helvetica, sans-serif !important; font-weight: normal !important; font-style: normal !important; font-variant: normal !important; font-stretch: normal !important; font-kerning: normal !important; line-height: normal !important; outline: none !important; margin: 0px auto 0px auto !important; padding: 10px 12px 10px 12px !important; transition: all 0.4s !important; transition-duration: 0.4s !important; transition-timing-function: ease-out !important; height: 40px !important; align-items: center !important; gap: 8px !important; font-weight: bold !important; width: 140px !important; justify-content: center !important; }",t.innerHTML=t.innerHTML+".input-send-form-button-chatweb:hover { background-color: #111111 !important; border: none !important; border-radius: 20px !important; color: #FFFFFF !important; cursor: pointer !important; display: none; font-size: 14px !important; font-family: Arial, Helvetica, sans-serif !important; font-weight: normal !important; font-style: normal !important; font-variant: normal !important; font-stretch: normal !important; font-kerning: normal !important; line-height: normal !important; outline: none !important; margin: 0px auto 0px auto !important; padding: 10px 12px 10px 12px !important; transition: all 0.4s !important; transition-duration: 0.4s !important; transition-timing-function: ease-out !important; height: 40px !important; width: 140px !important; }",t.innerHTML=t.innerHTML+".input-send-form-button-chatweb:focus { background-color: #111111 !important; border: none !important; border-radius: 20px !important; color: #FFFFFF !important; cursor: pointer !important; display: none; font-size: 14px !important; font-family: Arial, Helvetica, sans-serif !important; font-weight: normal !important; font-style: normal !important; font-variant: normal !important; font-stretch: normal !important; font-kerning: normal !important; line-height: normal !important; outline: none !important; margin: 0px auto 0px auto !important; padding: 10px 12px 10px 12px !important; transition: all 0.4s !important; transition-duration: 0.4s !important; transition-timing-function: ease-out !important; height: 40px !important; width: 140px !important; }",document.querySelector("head").append(t)),showChatRestart||(document.getElementById("chat-history-refresh").style.display="none")}function handleExtraCode(){try{var t,e=document.createElement("style");""!==extraJavaScript&&((t=document.createElement("script")).type="text/javascript",t.innerText=extraJavaScript,document.getElementsByTagName("head")[0].appendChild(t)),""!==extraHeaderCss&&(e.innerHTML=e.innerHTML+extraHeaderCss),""!==extraBodyCss&&(e.innerHTML=e.innerHTML+extraBodyCss),document.querySelector("head").append(e)}catch(t){console.error(t)}}function changeChatHistoryClass(t){var e=document.getElementById("chat-history-chatweb");t?(e.classList.remove("chat-history-chatweb-chat-heigh"),e.classList.add("chat-history-chatweb-form-heigh")):(e.classList.remove("chat-history-chatweb-form-heigh"),e.classList.add("chat-history-chatweb-chat-heigh"))}function showAttachmentsMenu(){showAttachmentMenu=!showAttachmentMenu&&(!(0<arguments.length&&void 0!==arguments[0])||arguments[0]),document.getElementById("attachmentmenu").style.display=showAttachmentMenu?"block":"none"}function openChatWindow(){var t;(hasInstagramEnabled||hasLinkedInEnabled||hasMessengerEnabled||hasTelegramEnabled||hasWhatsAppEnabled)&&toggleHidden("floating-button-flexcontainer"),toggleHidden("chat-window"),toggleHidden("chat-open-chatweb"),changeChatHistoryClass(showForm),enableIdleMessage&&(activeIdleMessage=!1,hideIdleMessage()),(showForm||null===userId?disableInputButtons:(document.getElementById("chat-history-chatweb").innerHTML="",activateScrollEvent(),enableInputButtons(),hideFormButton(),startMessageHistory))(),showForm||messageList&&0!==(null==(t=messageList)?void 0:t.length)||!(dataShortname||dataIdnumber||dataUsername||dataLastname||dataFirstname||dataEmail)||sendFormMessage()}function closeChatWindow(){toggleHidden("chat-window"),toggleHidden("chat-open-chatweb"),(hasInstagramEnabled||hasLinkedInEnabled||hasMessengerEnabled||hasTelegramEnabled||hasWhatsAppEnabled)&&(toggleHidden("floating-instagram-btn"),toggleHidden("floating-linkedin-btn"),toggleHidden("floating-messenger-btn"),toggleHidden("floating-telegram-btn"),toggleHidden("floating-whatapp-btn"),toggleHidden("chat-open-chatweb"),toggleHidden("floating-button-flexcontainer"))}function refreshChatWindow(){document.getElementById("goBottom-chatweb").style.display="none",localStorage.removeItem("messageList".concat(integrationId)),localStorage.removeItem("showForm".concat(integrationId)),localStorage.removeItem("userId".concat(integrationId)),sessionId=generateId(20),userId=generateId(16),messageList=[],document.getElementById("chat-history-chatweb").innerHTML=formHtmlData,null!==webSocket&&(webSocket.onerror=function(){},webSocket.onclose=function(){},webSocket.close(),webSocket=null),""===formHtmlData?(localStorage.setItem("showForm".concat(integrationId),"false"),localStorage.setItem("userId".concat(integrationId),userId),changeChatHistoryClass(showForm=!1)):(disableInputButtons(),handleNumericInput(),showFormButton(),changeChatHistoryClass(showForm=!0))}function activateScrollEvent(){document.getElementById("goBottom-chatweb").addEventListener("click",function(){var t=document.getElementById("chat-history-chatweb").scrollHeight;document.getElementById("chat-history-chatweb").scrollTop=t}),document.getElementById("chat-history-chatweb").addEventListener("scroll",function(t){return function(t,e){var e=1<arguments.length&&void 0!==e&&e,n=document.getElementById("chat-history-chatweb").scrollHeight-document.getElementById("chat-history-chatweb").offsetHeight;Math.ceil(t)>=n?(document.getElementById("goBottom-chatweb").style.display="none",document.getElementById("new-scroll-chatweb").textContent=""):(document.getElementById("goBottom-chatweb").style.display="block",e&&AddInTextContent(document.getElementById("new-scroll-chatweb"),1)),document.getElementById("chat-history-chatweb").scrollTop<20&&incompleteHistory&&fillMessageHistory()}(t.target.scrollTop)},!1)}function webSocketKeepAlive(){webSocket&&(webSocket.readyState==webSocket.OPEN&&webSocket.send(""),timerid=setTimeout(webSocketKeepAlive,1e4))}function cancelWebSocketKeepAlive(){timerid&&clearTimeout(timerid)}function webSocketConnect(){var t;null===webSocket&&("undefined"!==sessionId&&sessionId||(sessionId=generateId(20)),t="".concat(baseSocketEndpoint).concat(userId,"/").concat(sessionId),(webSocket=new WebSocket(t)).onmessage=webSocketOnMessage,webSocket.onopen=webSocketOnOpen,webSocket.onerror=function(t){console.log("WEBSOCKET ERROR: ".concat(JSON.stringify(t))),webSocket.onerror=function(){},webSocket.onclose=function(){},webSocket.close(),webSocket=null,cancelWebSocketKeepAlive(),setTimeout(function(){webSocketConnect()},1e3)},webSocket.onclose=function(){console.log("WEBSOCKET CLOSED"),webSocket.onerror=function(){},webSocket.onclose=function(){},webSocket.close(),webSocket=null,cancelWebSocketKeepAlive(),setTimeout(function(){webSocketConnect()},1e3)})}function webSocketOnOpen(){webSocketKeepAlive(),messageQueueList&&0<messageQueueList.length&&messageQueueList.forEach(function(t){return sendMessageToBroker(t)}),messageQueueList=[]}function webSocketOnMessage(t){if(t.data.match(/unexpected EOF/gi))return null;t=JSON.parse(t.data);addMessageToList(t.message),"onBouncingMessageMethod"!==t.method&&(document.getElementById("countercontainer").style.display="",newmessages++,document.getElementById("counternumber").innerText=9<newmessages?"9+":newmessages,sendEvent("delivery"),drawMessage({messageData:t.message,id:t.message.id,playSound:!0,putList:!0}))}function addMessageToList(t){messageList.push(t),localStorage.setItem("messageList".concat(integrationId),JSON.stringify(messageList))}function buildChatWebHistory(){var t=document.getElementById("chat-history-chatweb");t.innerHTML="",messageList.sort(function(t,e){return t.createdAt-e.createdAt}),fillMissingMessages(),appendMessagesToHistory(messageList,t),t.scrollTop=t.scrollHeight}function scrollToBottom(){var t=document.getElementById("chat-history-chatweb");t.scrollTop=t.scrollHeight}function appendMessagesToHistory(a,t){var e=a.reduce(function(t,e,n){return t+drawMessage({lastbot:e.senderId!==userId&&(a[n+1]&&a[n+1].senderId===userId||!a[n+1]),messageData:e,id:e.id})},"");t.innerHTML=e,resetCarousel()}function generateId(e){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(e)})}function findUserForm(t){return _findUserForm.apply(this,arguments)}function _findUserForm(){return(_findUserForm=_asyncToGenerator(_regeneratorRuntime().mark(function t(e){var n,a;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!==e&&e)if(0<e.length)return n={query:[{value:integrationId,key:"integrationId"},{value:"form",key:"type"}],sort:"DESC",pageSize:1,page:1},e.forEach(function(t){n.query.push({value:{$elemMatch:{value:t.value,field:t.field}},key:"data"})}),t.next=6,fetchRequest("".concat(baseBrokerEndpoint,"messages/get"),n);t.next=8;break;case 6:"ERROR"!==(a=t.sent)&&"undefined"!==(a=JSON.parse(a))&&a&&0<a.count&&"undefined"!==a.data&&a.data&&localStorage.setItem("userId".concat(integrationId),a.data[0].senderId);case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function fillMessageHistory(){var t;messageList.sort(function(t,e){return t.createdAt-e.createdAt}),0<messageList.length&&(t=messageList[0].createdAt,t={query:[{value:integrationId,key:"integrationId"},{value:{$lt:t},key:"createdAt"},{value:[{recipientId:userId},{senderId:userId}],key:"$or"}],sort:"DESC",pageSize:20,page:1},fetchRequest("".concat(baseBrokerEndpoint,"messages/get"),t).then(function(t){var e;"ERROR"!==t&&"undefined"!==(t=JSON.parse(t))&&t&&(0<t.count?"undefined"!==t.data&&t.data&&(t.data.forEach(function(t){return messageList.push(t)}),localStorage.setItem("messageList".concat(integrationId),JSON.stringify(messageList)),t=document.getElementById("chat-history-chatweb").scrollHeight,buildChatWebHistory(),e=document.getElementById("chat-history-chatweb").scrollHeight,document.getElementById("chat-history-chatweb").scrollTop=e-t,null===webSocket)&&webSocketConnect():incompleteHistory=!1)}))}function fillMissingMessages(){var t;messageList.sort(function(t,e){return t.createdAt-e.createdAt}),0<messageList.length&&(t=messageList[messageList.length-1].createdAt,t={query:[{value:integrationId,key:"integrationId"},{value:{$gt:t},key:"createdAt"},{value:[{recipientId:userId},{senderId:userId}],key:"$or"}],sort:"DESC",pageSize:20,page:1},fetchRequest("".concat(baseBrokerEndpoint,"messages/get"),t).then(function(t){"ERROR"!==t&&"undefined"!==(t=JSON.parse(t))&&t&&0<t.count&&"undefined"!==t.data&&t.data&&(t.data.forEach(function(t){return messageList.push(t)}),messageList.sort(function(t,e){return t.createdAt-e.createdAt}),localStorage.setItem("messageList".concat(integrationId),JSON.stringify(messageList)))}))}function startMessageHistory(){var t;"undefined"!==localStorage.getItem("messageList".concat(integrationId))&&localStorage.getItem("messageList".concat(integrationId))?(messageList=JSON.parse(localStorage.getItem("messageList".concat(integrationId))),null===webSocket&&webSocketConnect(),enableAbandon&&sendRecoveryEvent(),buildChatWebHistory()):(t={query:[{value:integrationId,key:"integrationId"},{value:[{recipientId:userId},{senderId:userId}],key:"$or"}],sort:"DESC",pageSize:20,page:1},fetchRequest("".concat(baseBrokerEndpoint,"messages/get"),t).then(function(t){"ERROR"!==t&&"undefined"!==(t=JSON.parse(t))&&t&&0<t.count&&"undefined"!==t.data&&t.data&&(messageList=t.data,null===webSocket&&webSocketConnect(),buildChatWebHistory())}))}function sendEvent(t){var e;userId&&(null===webSocket&&webSocketConnect(),e=generateId(20),sendMessageToBroker({integrationId:integrationId,sessionUuid:sessionId,createdAt:Date.now(),recipientId:"HOOK",senderId:userId,type:"event",metadata:{idtemp:e},data:{status:t}}))}function sendFormMessage(){return _sendFormMessage.apply(this,arguments)}function _sendFormMessage(){return(_sendFormMessage=_asyncToGenerator(_regeneratorRuntime().mark(function t(){var e,n;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:"undefined"!==localStorage.getItem("userId".concat(integrationId))&&localStorage.getItem("userId".concat(integrationId))&&(userId=localStorage.getItem("userId".concat(integrationId)),null===webSocket&&webSocketConnect(),e=generateId(20),n=[],dataShortname&&n.push({field:"OCCUPATION",label:"OCCUPATION",value:dataShortname}),dataIdnumber&&n.push({field:"CLIENTNUMBER",label:"CLIENTNUMBER",value:dataIdnumber}),dataUsername&&n.push({field:"CONTACT",label:"CONTACT",value:dataUsername}),dataLastname&&n.push({field:"LASTNAME",label:"LASTNAME",value:dataLastname}),dataFirstname&&n.push({field:"FIRSTNAME",label:"FIRSTNAME",value:dataFirstname}),dataEmail&&n.push({field:"MAIL",label:"MAIL",value:dataEmail}),sendMessageToBroker({integrationId:integrationId,sessionUuid:sessionId,createdAt:Date.now(),recipientId:"HOOK",senderId:userId,data:n,type:"form",metadata:{idtemp:e}}));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}function sendMessage(){return _sendMessage.apply(this,arguments)}function _sendMessage(){return(_sendMessage=_asyncToGenerator(_regeneratorRuntime().mark(function t(){var e,n,a,o,i,r,s,c,l=arguments;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=0<l.length&&void 0!==l[0]?l[0]:null,n=1<l.length&&void 0!==l[1]?l[1]:null,!showForm){t.next=21;break}if(a=!0,o="",i=[],0<formDataList.length&&formDataList.forEach(function(t){var e=document.getElementById("form-id-".concat(t.field)).value;"phone"!==t.type?("undefined"!==t.required&&t.required&&("undefined"!==e&&e?document.getElementById("alert-".concat(t.field)).style.display="none":(document.getElementById("alert-".concat(t.field)).style.display="block",o=t.label,a=!1)),"undefined"!==t.inputvalidation&&t.inputvalidation&&(new RegExp(t.inputvalidation).test(e)?document.getElementById("alert-".concat(t.field)).style.display="none":(document.getElementById("alert-".concat(t.field)).style.display="block",o=t.label,a=!1))):("undefined"!==t.required&&t.required&&("undefined"!==e&&e?document.getElementById("alert-".concat(t.field)).style.display="none":(document.getElementById("alert-".concat(t.field)).style.display="block",o=t.label,a=!1)),"undefined"!==e&&e&&(window.intlTelInputGlobals.getInstance(document.getElementById("form-id-".concat(t.field))).isValidNumber()?document.getElementById("alert-".concat(t.field)).style.display="none":(document.getElementById("alert-".concat(t.field)).style.display="block",o=t.label,a=!1))),a&&("phone"!==t.type?i.push({field:t.field,label:t.label,value:e}):i.push({value:window.intlTelInputGlobals.getInstance(document.getElementById("form-id-".concat(t.field))).getNumber().split("+")[1],field:t.field,label:t.label}))}),a){t.next=10;break}return document.getElementById("chat-history-alert-box").innerHTML="El campo <strong>".concat(o,"</strong> no cumple con nuestras reglas de validacion!"),t.abrupt("return");case 10:if(enableFormHistory)return t.next=13,findUserForm(i);t.next=13;break;case 13:"undefined"!==localStorage.getItem("userId".concat(integrationId))&&localStorage.getItem("userId".concat(integrationId))?(userId=localStorage.getItem("userId".concat(integrationId)),null===webSocket&&webSocketConnect(),activateScrollEvent(),startMessageHistory()):(userId=generateId(16),localStorage.setItem("userId".concat(integrationId),userId),null===webSocket&&webSocketConnect(),r=generateId(20),sendMessageToBroker({integrationId:integrationId,sessionUuid:sessionId,createdAt:Date.now(),recipientId:"HOOK",senderId:userId,data:i,type:"form",metadata:{idtemp:r}}),document.getElementById("chat-history-chatweb").innerHTML=""),localStorage.setItem("showForm".concat(integrationId),"false"),enableInputButtons(),hideFormButton(),changeChatHistoryClass(showForm=!1),t.next=32;break;case 21:if(""==document.getElementById("chat-input-chatweb").value.trim()&&null==e)return document.getElementById("chat-input-chatweb").value="",t.abrupt("return");t.next=24;break;case 24:null===webSocket&&webSocketConnect(),r=e||document.getElementById("chat-input-chatweb").value,s=generateId(20),c={integrationId:integrationId,sessionUuid:sessionId,createdAt:Date.now(),recipientId:"HOOK",senderId:userId,type:"text",metadata:{idtemp:s},data:{message:r,title:n}},document.getElementById("chat-input-chatweb").value="",drawMessage({messageData:c,fromAgent:!0,id:s,putList:!0}),sendMessageToBroker(c),resetCarousel();case 32:document.getElementById("sendButton").style.display="none";case 33:case"end":return t.stop()}},t)}))).apply(this,arguments)}document.addEventListener("DOMContentLoaded",initializeChat),window.addEventListener("resize",changeCarouselWidth);var drawMessage=function(t){var e=t.messageData,n=t.putList,n=void 0!==n&&n,a=t.playSound,a=void 0!==a&&a,o=t.id,i=t.fromAgent,t=t.lastbot,r=e.senderId==userId?"user":"bot",s="",c=("bot"!==lascontact||"bot"!=r||t||(c=document.querySelector(".content-message-chatweb:last-child"))&&(c.classList.remove("lastbot"),c.classList.add("notlastbot")),lascontact=e.senderId==userId?"user":"bot",t||"bot"==r&&n?'<img loading="eager" class="chat-message-chatweb-'.concat(r,'-avatar" src="').concat(chatBotUrl,'" alt="Avatar">'):"<span></span>"),l='data-zyxme-tooltip="'.concat(formatDate(e.createdAt),'"'),t=i?"interaction-pending":"",d=("bot"==r&&showMessageHeader&&(i=!1,void 0!==e.metadata&&e.metadata&&void 0!==e.metadata.agentName&&e.metadata.agentName&&(s='<p class="content-message-chatweb-headermessage" style="color: '.concat(formTextColor,';">').concat(e.metadata.agentName,":</p>"),i=!0),i||""!==headerMessage&&(s='<p class="content-message-chatweb-headermessage" style="color: '.concat(formTextColor,';">').concat(headerMessage,":</p>"))),'<div data-id="'.concat(o,'" class="content-message-chatweb ').concat(t," last").concat(r," content-message-chatweb-").concat(r).concat("typing"===e.type?" loading":"",'">').concat(c,"<div>").concat(s));switch(e.type){case"typing":d+="<div ".concat(l,' class="chat-message-chatweb chat-message-chatweb-').concat(r,'"><p class="chat-message-chatweb-paragraph" style="white-space: break-spaces;"><span class="dots"><span>.</span><span>.</span><span>.</span></span></p></div>');break;case"location":case"text":var u=e.data.message,m=(u="undefined"!==e.data.title&&e.data.title?e.data.title:u).match(/(https?:\/\/[^\s]+)/g);m&&m.forEach(function(t){u=u.replace(t,'<a style="color: '.concat("bot"==r?botChatTextColor:clientChatTextColor,'" href="').concat(t,'"  target="_blank">').concat(t,"</a> "))}),d+="<div ".concat(l,' class="chat-message-chatweb chat-message-chatweb-').concat(r,'"><p class="chat-message-chatweb-paragraph" style="white-space: break-spaces;">').concat(u,"</p></div>");break;case"audio":d+="<div ".concat(l,' class="chat-message-chatweb chat-message-chatweb-').concat(r,'"><audio controls><source src="').concat(e.data.mediaUrl,'" type="').concat(e.data.mimeType,'"></audio></div>');break;case"video":d+="<div ".concat(l,' class="chat-message-chatweb chat-message-chatweb-').concat(r,'"><video onloadedmetadata="scrollToBottom()" controls autoplay muted><source src="').concat(e.data.mediaUrl,'" type="').concat(e.data.mimeType,'"></video></div>');break;case"image":d+="<div ".concat(l,' class="chat-message-chatweb chat-message-chatweb-').concat(r,'"><img onLoad="scrollToBottom()" loading="eager" class="chat-image-bot-chatweb" onclick="showImageModal(this.src)" src="').concat(e.data.mediaUrl,'"></div>');break;case"file":d+="<div ".concat(l,' class="chat-message-chatweb chat-message-chatweb-').concat(r,'"><p><center style="margin-top: 10px; margin-bottom: 10px">').concat(e.data.fileName,' <a href="').concat(e.data.mediaUrl,'" target="_blank" download style="color: inherit;"><b>[DOWNLOAD]</b></a></center></p></div>');break;case"button":if("bot"==r){var p,h="<div ".concat(l,' class="chat-message-chatweb chat-message-chatweb-').concat(r,'"><p>').concat(e.data.message,'</p></div><div class="buttonchat-container-chatweb">');for(p in e.data.buttons)switch(e.data.buttons[p].type){case"postback":case"reply":h+='<button type="button" class="buttonchat-chatweb" onclick="sendMessage(\''.concat(e.data.buttons[p].payload,"', '").concat(e.data.buttons[p].text,"')\">").concat(e.data.buttons[p].text,"</button>");break;case"link":h+='<button type="button" class="buttonchat-chatweb" onclick="window.open(\''.concat(e.data.buttons[p].uri,"','_blank')\">").concat(e.data.buttons[p].text,"</button>")}d+=h+="</div>"}break;case"carousel":var m="<div ".concat(l,' id="carousel_').concat(e.id,'" style="margin: 5px 0; overflow: auto" class="carousel-chatweb chat-message-chatweb-').concat(r,'" data-interval="false" data-ride="carousel"><div class="carousel-inner-chatweb">###HTMLCONTENT###</div></div>'),g=e.data.length,b="class1rad",f="",v=0,w=e.data.length;e.data.forEach(function(t,e){var n=t.description?'<p style="line-height: normal; font-size: 12px; text-align: left; padding-left: 20px; margin-top: 5px;">'.concat(t.description," </p>###ACTIONS### ###BUTTONS###</div></div>"):"",n='<div class="carousel-item-chatweb '.concat("active"," ").concat(b,'"><div class="d-block ').concat(b,' block-carousel-width" style="height: 100%; color: black; position: relative;"><img loading="eager" class="d-block mx-auto imge-carousel-chatweb" style="width:100%; border-radius: ').concat(0==v?"20px":"0"," 0 0 ").concat(v==g?"20px":"0",'; border-bottom: 1px solid #e1e1e1; margin-bottom: 7px;" src="').concat(t.mediaUrl,'"><div style="line-height: 1.3; font-family: \'Varela Round\', sans-serif; font-weight: bold; padding-left: 20px; padding-right: 20px">').concat(t.title,"</div>").concat(n),a="",t=(t.buttons.forEach(function(t){"link"===t.type?a+='<a target="_blank" href="'.concat(t.uri||"#",'" class="button-container-chatweb" >').concat(t.text,"</a>"):a+='<button type="button" onclick="sendMessage(\''.concat(t.payload,"', '").concat(t.text,'\')" class="button-container-chatweb">').concat(t.text,"</button>")}),"");0===e?t+='<div onclick="chatzyxpushitem(this)" data-push="right" style="right: -13px;" class="actions-slide-carousel actions-slide-carousel-lead"><span  class="goBottom-chatweb-son" style="font-size:20px; left:-9px; top:-5px; position:absolute"><svg viewBox="0 0 20 20" width="1em" height="1em" class=" svg-vertical a8c37x1j ms05siws hwsy1cff b7h9ocf4 em6zcovv rgmg9uty b73ngqbp"><path d="m7.8 4.53 5.473 5.47-5.473 5.47a.75.75 0 0 0 1.061 1.06l6-6a.751.751 0 0 0 0-1.06l-6-6a.75.75 0 0 0 -1.061 1.06z"></path></svg></span></div>':(t+='<div onclick="chatzyxpushitem(this)" data-push="left" style="left: -13px; display: none" class="actions-slide-carousel actions-slide-carousel-left"> <span  class="goBottom-chatweb-son" style="font-size:20px; left:-9px; top:-5px; position:absolute"> <svg viewBox="0 0 20 20" width="1em" height="1em" class=" svg-vertical a8c37x1j ms05siws hwsy1cff b7h9ocf4 em6zcovv rgmg9uty b73ngqbp"><path d="m12.2 4.53-5.473 5.47 5.47 5.47a.75.75 0 0 1 -1.061 1.06l-6-6a.751.751 0 0 1 0-1.06l6-6a.75.75 0 1 1 1.064 1.06z"></path></svg></span></div>',e+1<w&&(t+='<div onclick="chatzyxpushitem(this)" data-push="right" style="display: none; right: -13px;" class="actions-slide-carousel"><span  class="goBottom-chatweb-son" style="font-size:20px; left:-9px; top:-5px; position:absolute"><svg viewBox="0 0 20 20" width="1em" height="1em" class=" svg-vertical a8c37x1j ms05siws hwsy1cff b7h9ocf4 em6zcovv rgmg9uty b73ngqbp"><path d="m7.8 4.53 5.473 5.47-5.473 5.47a.75.75 0 0 0 1.061 1.06l6-6a.751.751 0 0 0 0-1.06l-6-6a.75.75 0 0 0 -1.061 1.06z"></path></svg></span></div>')),n=n.replace("###ACTIONS###",a).replace("###BUTTONS###",t),f+=n,b="",b=(v+=1)==g?"class2rad":""}),d+=m=m.replace("###HTMLCONTENT###",f);break;default:return""}d+="</div></div>",""===document.getElementById("chat-history-chatweb").innerHTML&&(document.getElementById("chat-history-chatweb").innerHTML+=" ",d='<div class="chat-message-start chat-hour-color">'.concat(formatFullDate(e.createdAt||(new Date).getTime()),"</div>")+d),n&&(document.getElementById("chat-history-chatweb").innerHTML+=d);i=document.getElementById("chat-history-chatweb").scrollHeight;return document.getElementById("chat-history-chatweb").scrollTop=i,showAttachmentsMenu(!1),playAlertSound&&a&&"bot"==r&&new Audio("".concat(baseResourceEndpoint,"Audio/Alert.mp3")).play(),"bot"==r?("button"===e.type||"carousel"===e.type?inputAlwaysActive||disableInputButtons():inputAlwaysActive||enableInputButtons(),playAlertSound&&a&&new Audio("".concat(baseResourceEndpoint,"Audio/Alert.mp3")).play()):inputAlwaysActive||enableInputButtons(),d};function sendMessageToBroker(n){var a=document.querySelector(".content-message-chatweb[data-id='".concat(n.metadata.idtemp,"']"));sendMetaData&&(n.metadata.extradata=extraData),fetchRequest("".concat(baseBrokerEndpoint,"messages/send"),n).then(function(t){var e;"ERROR"===t||(e=JSON.parse(t)).error||(n.createdAt=e.createdAt,n.messageId=e.messageId,addMessageToList(n)),a&&(a.classList.remove("interaction-pending"),"ERROR"!==t&&!JSON.parse(t).error||a.classList.add("interaction-error"))})}function showImageModal(t){document.getElementById("chat-image-modal").style.display="block",document.getElementById("modal-image").src=t}function closeImageModal(){document.getElementById("chat-image-modal").style.display="none"}function formatDate(t){var t=new Date(t),e=t.getHours(),t=t.getMinutes(),n=12<=e?"PM":"AM";return(e=(e%=12)||12)+":"+(t<10?"0"+t:t)+" "+n}function formatFullDate(t){var t=new Date(t),e="";switch((t.getMonth()+1).toString().padStart(2,"0")){case"01":e="ENERO";break;case"02":e="FEBRERO";break;case"03":e="MARZO";break;case"04":e="ABRIL";break;case"05":e="MAYO";break;case"06":e="JUNIO";break;case"07":e="JULIO";break;case"08":e="AGOSTO";break;case"09":e="SETIEMBRE";break;case"10":e="OCTUBRE";break;case"11":e="NOVIEMBRE";break;case"12":e="DICIEMBRE"}var n=t.getHours(),a="AM";return 12<n&&(n-=12,a="PM"),"".concat(t.getDate().toString().padStart(2,"0")," ").concat(e," ").concat(t.getFullYear(),", ").concat(n.toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0")," ").concat(a)}function locationGet(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(locationUpload)}function locationUpload(t){null===webSocket&&webSocketConnect();var e=generateId(20),t={integrationId:integrationId,sessionUuid:sessionId,createdAt:Date.now(),recipientId:"HOOK",senderId:userId,type:"location",metadata:{idtemp:e},data:{longitude:t.coords.longitude,latitude:t.coords.latitude,message:"Se envio data de localización."}};drawMessage({messageData:t,fromAgent:!0,id:e,putList:!0}),sendMessageToBroker(t)}function fileUpload(o,i){var r=o.target.files[0],t=new FileReader,s=[];t.readAsArrayBuffer(r),t.onloadend=function(t){if(t.target.readyState==FileReader.DONE){var e,t=t.target.result,n=_createForOfIteratorHelper(new Uint8Array(t));try{for(n.s();!(e=n.n()).done;){var a=e.value;s.push(a)}}catch(t){n.e(t)}finally{n.f()}t={fileName:"EXTERNAL/".concat(r.name),fileData:s};fetchRequest(baseFileUploadEndpoint,t).then(function(t){var e;"ERROR"!==t&&"undefined"!==(t=JSON.parse(t))&&t&&t.success&&t.url&&(null===webSocket&&webSocketConnect(),e=generateId(20),t={fileName:r.name,mimeType:r.type,mediaUrl:t.url},t={integrationId:integrationId,sessionUuid:sessionId,data:t,createdAt:Date.now(),recipientId:"HOOK",senderId:userId,type:i,metadata:{idtemp:e}},drawMessage({messageData:t,fromAgent:!0,putList:!0,id:e}),sendMessageToBroker(t)),o.target.value=""})}}}function validateKeyPress(t,e){var n;void 0!==e&&"undefined"!==e&&e&&(n=t||window.event,e=new RegExp(e),t="paste"===n.type?t.clipboardData.getData("text/plain"):(t=n.keyCode||n.which,String.fromCharCode(t)),e.test(t)||(n.returnValue=!1,n.preventDefault&&n.preventDefault()))}function validateChange(t,e,n){void 0!==e&&"undefined"!==e&&e&&void 0!==n&&"undefined"!==n&&n&&(t=(t||window.event).currentTarget.value,new RegExp(e).test(t)?document.getElementById("alert-".concat(n)).style.display="none":document.getElementById("alert-".concat(n)).style.display="block")}function getCustomStyle(){return _getCustomStyle.apply(this,arguments)}function _getCustomStyle(){return(_getCustomStyle=_asyncToGenerator(_regeneratorRuntime().mark(function t(){var e,n,a,o;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetchRequest("".concat(baseBrokerEndpoint,"integrations/").concat(integrationId),void 0,"GET");case 2:if(e=t.sent,n=!1,a=null,"ERROR"===e)t.next=43;else if("ACTIVO"!==(a=JSON.parse(e)).status)t.next=43;else if(n=!0,void 0!==a.metadata&&a.metadata)if((o=document.createElement("style")).id="customStyle",void 0!==a.metadata.color&&a.metadata.color&&(void 0!==a.metadata.color.chatBackgroundColor&&a.metadata.color.chatBackgroundColor&&(o.innerHTML=o.innerHTML+".chat-history-chatweb {background-color: ".concat(a.metadata.color.chatBackgroundColor,";margin: 0px 0px 0px 0px;overflow: auto;padding: 10px;scrollbar-width: thin;text-align: left;width: 100%;}"),formTextColor=getTextColor(a.metadata.color.chatBackgroundColor),o.innerHTML=o.innerHTML+".chat-form-label {box-sizing: content-box;color: ".concat(formTextColor,";display: block;font-family: Verdana, Tahoma, sans-serif;font-size: 12px;font-weight: 400;line-height: normal;margin-bottom: 4px;word-break: break-word;}"),o.innerHTML=o.innerHTML+".chat-hour-color {color: ".concat(formTextColor,";}")),void 0!==a.metadata.color.chatBorderColor&&a.metadata.color.chatBorderColor&&(o.innerHTML=o.innerHTML+".chat-popup-chatweb {background-color: ".concat(a.metadata.color.chatBorderColor,";border-color: ").concat(a.metadata.color.chatBorderColor,";border-radius: 12px;border-style: solid;border-width: 2px;bottom: 30px;box-shadow: 0 -1px 3px rgb(0 0 0 / 10%);right: 24px;position: fixed;z-index: 1000000001;animation: appear-button-frames .4s cubic-bezier(.62,.28,.23,.99);animation-delay: 0.2s;animation-fill-mode: both;}")),void 0!==a.metadata.color.chatHeaderColor&&a.metadata.color.chatHeaderColor&&(o.innerHTML=o.innerHTML+".chat-header-chatweb {background-color: ".concat(a.metadata.color.chatHeaderColor,";border-bottom: none;border-top-left-radius: 12px;border-top-right-radius: 12px;box-shadow: 0 1px 3px rgb(0 0 0 / 10%);font-size: 12px;justify-content: space-between;overflow: hidden;padding: 12px 12px 12px;width: 100%;}"),headerTextColor=getTextColor(a.metadata.color.chatHeaderColor),o.innerHTML=o.innerHTML+".header-text-title {color: ".concat(headerTextColor,";box-sizing: content-box;font-family: Verdana, Tahoma, sans-serif;font-size: 16px;font-weight: normal;line-height: normal;margin: 2px 0px 8px 0px; font-weight: bold}"),o.innerHTML=o.innerHTML+".header-text-subtitle {color: ".concat(headerTextColor,";box-sizing: content-box;font-family: Verdana, Tahoma, sans-serif;font-size: 12px;font-weight: normal;line-height: normal;margin: 2px 0px 0px 0px;}"),o.innerHTML=o.innerHTML+".header-close-button-x {color: ".concat(headerTextColor,"}")),void 0!==a.metadata.color.messageBotColor&&a.metadata.color.messageBotColor&&(botChatTextColor=getTextColor(a.metadata.color.messageBotColor),o.innerHTML=o.innerHTML+".chat-message-chatweb-bot {background-color: ".concat(a.metadata.color.messageBotColor,";color: ").concat(botChatTextColor,";}")),void 0!==a.metadata.color.messageClientColor)&&a.metadata.color.messageClientColor&&(clientChatTextColor=getTextColor(a.metadata.color.messageClientColor),o.innerHTML=o.innerHTML+".chat-message-chatweb-user {background-color: ".concat(a.metadata.color.messageClientColor,";color: ").concat(clientChatTextColor,";margin-left: auto;}")),void 0!==a.metadata.icons&&a.metadata.icons&&(void 0!==a.metadata.icons.chatBotImage&&a.metadata.icons.chatBotImage&&(chatBotUrl=a.metadata.icons.chatBotImage),void 0!==a.metadata.icons.chatHeaderImage&&a.metadata.icons.chatHeaderImage&&(companyHeaderUrl=a.metadata.icons.chatHeaderImage),void 0!==a.metadata.icons.chatOpenImage&&a.metadata.icons.chatOpenImage&&(chatOpenUrl=a.metadata.icons.chatOpenImage),void 0!==a.metadata.icons.chatIdleImage)&&a.metadata.icons.chatIdleImage&&(idleMessageUrl=a.metadata.icons.chatIdleImage),void 0!==a.metadata.form&&a.metadata.form&&0<a.metadata.form.length?(formDataList=a.metadata.form).forEach(function(t){"DOCUMENTTYPE"===t.field?formHtmlData+='\n\t\t\t\t\t\t\t\t<div class="chat-form-element">\n\t\t\t\t\t\t\t\t\t<label class="chat-form-label">'.concat(t.label,'</label>\n\t\t\t\t\t\t\t\t\t<select class="chat-form-input" id="form-id-').concat(t.field,'">\n\t\t\t\t\t\t\t\t\t\t<option value="">--Seleccione--</option>\n\t\t\t\t\t\t\t\t\t\t<option value="DNI">DNI</option>\n\t\t\t\t\t\t\t\t\t\t<option value="PASAPORTE">PASAPORTE</option>\n\t\t\t\t\t\t\t\t\t\t<option value="RUC">RUC</option>\n\t\t\t\t\t\t\t\t\t\t<option value="CE">CARNET DE EXTRANJERÍA</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span class="chat-form-alert" id="alert-').concat(t.field,'">').concat(t.validationtext,"</span>"):"phone"!==t.type?formHtmlData+='\n\t\t\t\t\t\t\t\t<div class="chat-form-element">\n\t\t\t\t\t\t\t\t\t<label class="chat-form-label">'.concat(t.label,'</label>\n\t\t\t\t\t\t\t\t\t<input class="chat-form-input" type="').concat(t.type,'" onkeypress=\'validateKeyPress(event, "').concat(t.keyvalidation,"\")' onchange='validateChange(event, \"").concat(t.inputvalidation,'", "').concat(t.field,'")\' placeholder="').concat(t.placeholder,'" id="form-id-').concat(t.field,'">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span class="chat-form-alert" id="alert-').concat(t.field,'">').concat(t.validationtext,"</span>"):(formHtmlData+='<div class="chat-form-element">\n\t\t\t\t\t\t\t\t\t\t<label class="chat-form-label">\n\t\t\t\t\t\t\t\t\t\t\t'.concat(t.label,'\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tclass="chat-form-input"\n\t\t\t\t\t\t\t\t\t\t\ttype="').concat(t.type,'"\n\t\t\t\t\t\t\t\t\t\t\tonkeypress=\'validateKeyPress(event, "').concat(t.keyvalidation,"\")'\n\t\t\t\t\t\t\t\t\t\t\tonchange='validateChange(event, \"").concat(t.inputvalidation,'", "').concat(t.field,'")\'\n\t\t\t\t\t\t\t\t\t\t\tplaceholder="').concat(t.placeholder,'"\n\t\t\t\t\t\t\t\t\t\t\tid="form-id-').concat(t.field,'"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclass="chat-form-alert"\n\t\t\t\t\t\t\t\t\t\tid="alert-').concat(t.field,'"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t').concat(t.validationtext,"\n\t\t\t\t\t\t\t\t\t</span>"),numberFormList.push("form-id-".concat(t.field)))}):(localStorage.setItem("showForm".concat(integrationId),"false"),"undefined"!==localStorage.getItem("userId".concat(integrationId))&&localStorage.getItem("userId".concat(integrationId))||localStorage.setItem("userId".concat(integrationId),generateId(16))),void 0!==a.metadata.personalization&&a.metadata.personalization&&(void 0!==a.metadata.personalization.headerTitle&&a.metadata.personalization.headerTitle&&(headerTitle=a.metadata.personalization.headerTitle),void 0!==a.metadata.personalization.headerSubTitle&&a.metadata.personalization.headerSubTitle&&(headerSubtitle=a.metadata.personalization.headerSubTitle),void 0!==a.metadata.personalization.idleMessage)&&a.metadata.personalization.idleMessage&&(idleMessage=a.metadata.personalization.idleMessage),void 0!==a.metadata.extra&&a.metadata.extra){if(void 0!==a.metadata.extra.abandonendpoint&&null!==a.metadata.extra.abandonendpoint&&(abandonEndpoint=a.metadata.extra.abandonendpoint),void 0!==a.metadata.extra.enableabandon&&null!==a.metadata.extra.enableabandon&&(enableAbandon=a.metadata.extra.enableabandon),void 0!==a.metadata.extra.sendmetadata&&null!==a.metadata.extra.sendmetadata&&(sendMetaData=a.metadata.extra.sendmetadata))return t.next=24,setExtraData();t.next=24}else t.next=41;else t.next=43;break;case 24:void 0!==a.metadata.extra.headermessage&&null!==a.metadata.extra.headermessage&&(headerMessage=a.metadata.extra.headermessage),void 0!==a.metadata.extra.enableidlemessage&&null!==a.metadata.extra.enableidlemessage&&(enableIdleMessage=a.metadata.extra.enableidlemessage),void 0!==a.metadata.extra.uploadaudio&&null!==a.metadata.extra.uploadaudio&&(showAudioInput=a.metadata.extra.uploadaudio),void 0!==a.metadata.extra.uploadfile&&null!==a.metadata.extra.uploadfile&&(showFileInput=a.metadata.extra.uploadfile),void 0!==a.metadata.extra.uploadimage&&null!==a.metadata.extra.uploadimage&&(showImageInput=a.metadata.extra.uploadimage),void 0!==a.metadata.extra.uploadlocation&&null!==a.metadata.extra.uploadlocation&&(showLocationInput=a.metadata.extra.uploadlocation),void 0!==a.metadata.extra.uploadvideo&&null!==a.metadata.extra.uploadvideo&&(showVideoInput=a.metadata.extra.uploadvideo),void 0!==a.metadata.extra.enableformhistory&&null!==a.metadata.extra.enableformhistory&&(enableFormHistory=a.metadata.extra.enableformhistory),void 0!==a.metadata.extra.inputalwaysactive&&null!==a.metadata.extra.inputalwaysactive&&(inputAlwaysActive=a.metadata.extra.inputalwaysactive),void 0!==a.metadata.extra.showmessageheader&&null!==a.metadata.extra.showmessageheader&&(showMessageHeader=a.metadata.extra.showmessageheader),void 0!==a.metadata.extra.showplatformlogo&&null!==a.metadata.extra.showplatformlogo&&(showPlatformLogo=a.metadata.extra.showplatformlogo),void 0!==a.metadata.extra.showlaraigologo&&null!==a.metadata.extra.showlaraigologo&&(showLaraigoLogo=a.metadata.extra.showlaraigologo),void 0!==a.metadata.extra.playalertsound&&null!==a.metadata.extra.playalertsound&&(playAlertSound=a.metadata.extra.playalertsound),void 0!==a.metadata.extra.showchatrestart&&null!==a.metadata.extra.showchatrestart&&(showChatRestart=a.metadata.extra.showchatrestart),void 0!==a.metadata.extra.cssbody&&a.metadata.extra.cssbody&&(extraBodyCss=a.metadata.extra.cssbody),void 0!==a.metadata.extra.cssheader&&a.metadata.extra.cssheader&&(extraHeaderCss=a.metadata.extra.cssheader),void 0!==a.metadata.extra.jsscript&&a.metadata.extra.jsscript&&(extraJavaScript=a.metadata.extra.jsscript);case 41:void 0!==a.metadata.allowedendpoint&&a.metadata.allowedendpoint&&0<a.metadata.allowedendpoint.length&&(n=!1,a.metadata.allowedendpoint.forEach(function(t){window.location.href.toUpperCase().includes(t.toUpperCase())&&(n=!0)})),document.querySelector("head").append(o);case 43:return t.abrupt("return",{integrationData:a,buildChat:n});case 44:case"end":return t.stop()}},t)}))).apply(this,arguments)}function setAbandonEvent(){window.addEventListener("beforeunload",function(){sendAbandonEvent()})}function sendAbandonEvent(){var t,e;""!==abandonEndpoint&&null!==userId&&null!==integrationId&&(t={MessageText:"Cliente abandonó la conversación",PlatformType:"CHAZ",AppId:integrationId,AppUserId:userId},(e=new FormData).append("data",JSON.stringify(t)),navigator.sendBeacon(abandonEndpoint+"/abandoned",e))}function sendRecoveryEvent(){""!==abandonEndpoint&&null!==userId&&null!==integrationId&&fetchRequest("".concat(abandonEndpoint,"/recovery/").concat(integrationId,"/").concat(userId,"/CHAZ/Cliente recuperó la conversación"),void 0,"GET")}function fetchRequest(n,a){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"POST";return new Promise(function(e,t){fetch(n,{method:o,body:a?JSON.stringify(a):void 0,headers:{"Content-Type":"application/json"}}).then(function(t){t.ok?t.text().then(function(t){e(t)}):(console.log(t),e("ERROR"))}).catch(function(t){console.log(t),e("ERROR")})})}function enableInputButtons(){document.getElementById("input-attach-button-show").style.cursor="auto",document.getElementById("input-location-button").style.cursor="auto",document.getElementById("chat-input-chatweb").style.cursor="auto",document.getElementById("input-audio-button").style.cursor="auto",document.getElementById("input-image-button").style.cursor="auto",document.getElementById("input-video-button").style.cursor="auto",document.getElementById("input-file-button").style.cursor="auto",document.getElementById("input-attach-button-show").disabled=!1,document.getElementById("input-location-button").disabled=!1,document.getElementById("chat-input-chatweb").disabled=!1,document.getElementById("input-audio-button").disabled=!1,document.getElementById("input-image-button").disabled=!1,document.getElementById("input-video-button").disabled=!1,document.getElementById("input-file-button").disabled=!1}function disableInputButtons(){document.getElementById("input-attach-button-show").style.cursor="not-allowed",document.getElementById("input-location-button").style.cursor="not-allowed",document.getElementById("chat-input-chatweb").style.cursor="not-allowed",document.getElementById("input-audio-button").style.cursor="not-allowed",document.getElementById("input-image-button").style.cursor="not-allowed",document.getElementById("input-video-button").style.cursor="not-allowed",document.getElementById("input-file-button").style.cursor="not-allowed",document.getElementById("input-attach-button-show").disabled=!0,document.getElementById("input-location-button").disabled=!0,document.getElementById("chat-input-chatweb").disabled=!0,document.getElementById("input-audio-button").disabled=!0,document.getElementById("input-image-button").disabled=!0,document.getElementById("input-video-button").disabled=!0,document.getElementById("input-file-button").disabled=!0,document.getElementById("chat-input-chatweb").value=" "}function showFormButton(){document.getElementById("input-attach-button-show").style.display="none",document.getElementById("chat-input-chatweb").style.display="none",document.getElementById("sendButton").style.display="none",document.getElementById("sendFormButton").style.display="block"}function hideFormButton(){document.getElementById("input-attach-button-show").style.display="block",document.getElementById("chat-input-chatweb").style.display="block",document.getElementById("sendFormButton").style.display="none"}function showAlertBox(){document.getElementById("chat-history-alert-box").style.display="none",document.getElementById("chat-history-alert-box").style.display="block",setTimeout(function(){document.getElementById("chat-history-alert-box").style.display="none"},6e3)}function getTextColor(t){4===t.length&&(t="".concat(t).concat(t.substr(1,3)));var e=parseInt(t.substr(3,2),16),n=parseInt(t.substr(5,2),16);return 128<=(299*parseInt(t.substr(1,2),16)+587*e+114*n)/1e3?"#111111":"#FFFFFF"}function loadExternalScript(t){return _loadExternalScript.apply(this,arguments)}function _loadExternalScript(){return(_loadExternalScript=_asyncToGenerator(_regeneratorRuntime().mark(function t(e){var n,a,o;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetchRequest("".concat(baseBrokerEndpoint,"integrations/").concat(integrationId),void 0,"GET");case 2:"ERROR"!==(a=t.sent)&&(n=JSON.parse(a),a=document.getElementsByTagName("head")[0],(o=document.createElement("script")).type="text/javascript",o.src=e,o.onload=_asyncToGenerator(_regeneratorRuntime().mark(function t(){var e;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(hasInstagramEnabled=null!=(e=null==(e=n.metadata)||null==(e=e.instagram)?void 0:e.enabled)&&e,hasLinkedInEnabled=null!=(e=null==(e=n.metadata)||null==(e=e.linkedin)?void 0:e.enabled)&&e,hasMessengerEnabled=null!=(e=null==(e=n.metadata)||null==(e=e.messenger)?void 0:e.enabled)&&e,hasTelegramEnabled=null!=(e=null==(e=n.metadata)||null==(e=e.telegram)?void 0:e.enabled)&&e,hasWhatsAppEnabled=null!=(e=null==(e=n.metadata)||null==(e=e.whatsapp)?void 0:e.enabled)&&e,hasInstagramEnabled||hasLinkedInEnabled||hasMessengerEnabled||hasTelegramEnabled||hasWhatsAppEnabled)return t.next=8,createFloatingButton();t.next=10;break;case 8:t.next=12;break;case 10:return t.next=12,printChat();case 12:case"end":return t.stop()}},t)})),a.appendChild(o));case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function chatzyxpushitem(t){var e=t.parentNode.parentNode,n=t.parentNode.parentNode.parentNode;e.querySelectorAll(".actions-slide-carousel").forEach(function(t){return t.style.display="none"}),"right"===t.dataset.push?(t.parentNode.parentNode.nextSibling.querySelectorAll(".actions-slide-carousel").forEach(function(t){return t.style.display=""}),n.scrollLeft+=carouselscroll):(t.parentNode.parentNode.previousSibling.querySelectorAll(".actions-slide-carousel").forEach(function(t){return t.style.display=""}),n.scrollLeft-=carouselscroll)}function resetCarousel(){document.querySelectorAll(".actions-slide-carousel").forEach(function(t){return t.style.display="none"}),document.querySelectorAll(".actions-slide-carousel-lead").forEach(function(t){return t.style.display=""}),document.querySelectorAll(".carousel-inner-chatweb").forEach(function(t){return t.scrollLeft=0})}function chatManualMessage(t){showForm||(openChatWindow(),document.getElementById("chat-input-chatweb").value=t,sendMessage())}function chatManualOpen(){"block"!==document.getElementById("chat-window").style.display&&openChatWindow()}function setExtraData(){return _setExtraData.apply(this,arguments)}function _setExtraData(){return(_setExtraData=_asyncToGenerator(_regeneratorRuntime().mark(function t(){var e,n,a,o,i,r,s;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,extraData="{",t.prev=2,t.next=5,fetchRequest("https://www.cloudflare.com/cdn-cgi/trace",void 0,"GET");case 5:if("ERROR"!==(e=t.sent)){for(n=e.split("\n"),a=0;a<n.length-1;a++)o=n[a].split("=")[1],i=n[a].split("=")[0],extraData+='"'.concat(i,'":"').concat(o,'",');extraData=extraData.substring(0,extraData.length-1),extraData+="}"}t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0);case 12:try{r=document.getElementsByTagName("head")[0],(s=document.createElement("script")).type="text/javascript",s.src="https://cdn.jsdelivr.net/gh/nanoxxi93/js/platform.1.3.6.min.js",s.onload=function(){modifyExtraData()},r.appendChild(s)}catch(t){console.error(t)}try{"{"!==extraData&&(extraData=extraData.substring(0,extraData.length-1)+","),extraData+='"refererurl":"'.concat(window.location.href,'"}')}catch(t){console.error(t)}t.next=19;break;case 16:t.prev=16,t.t1=t.catch(0),console.error(t.t1);case 19:case"end":return t.stop()}},t,null,[[0,16],[2,9]])}))).apply(this,arguments)}function modifyExtraData(){"undefined"!=typeof platform&&platform&&(extraData=extraData.substring(0,extraData.length-1)+","+JSON.stringify(platform).substring(1,JSON.stringify(platform).length))}